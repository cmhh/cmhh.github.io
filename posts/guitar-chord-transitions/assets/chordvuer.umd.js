(function(f,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],o):(f=typeof globalThis<"u"?globalThis:f||self,o(f.chordvuer={},f.Vue))})(this,function(f,o){"use strict";const E="",d=(e,t)=>{const i=e.__vccOpts||e;for(const[r,s]of t)i[r]=s;return i},p={name:"GuitarChord",props:{id:{type:String,required:!0},duration:{type:Number,default:1e3},fps:{type:Number,default:10},chord:{type:Object,default:{}}},computed:{frames(){const e=this.duration/1e3;return Math.ceil(this.fps*e)},frameLength(){return 1e3/this.fps}},watch:{chord(e,t){this.applyAll(e,t)}},mounted(){this.applyAll(this.chord,null)},methods:{async clear(){const e=document.getElementById(this.id);Array.prototype.slice.call(e.getElementsByClassName("finger")).forEach(t=>e.removeChild(t)),Array.prototype.slice.call(e.getElementsByClassName("chord-name")).forEach(t=>this.swaptxt(t,"")),Array.prototype.slice.call(e.getElementsByClassName("strike")).forEach(t=>this.swaptxt(t,"")),Array.prototype.slice.call(e.getElementsByClassName("note-high-e")).forEach(t=>this.swaptxt(t,"E")),Array.prototype.slice.call(e.getElementsByClassName("note-b")).forEach(t=>this.swaptxt(t,"B")),Array.prototype.slice.call(e.getElementsByClassName("note-g")).forEach(t=>this.swaptxt(t,"G")),Array.prototype.slice.call(e.getElementsByClassName("note-d")).forEach(t=>this.swaptxt(t,"D")),Array.prototype.slice.call(e.getElementsByClassName("note-a")).forEach(t=>this.swaptxt(t,"A")),Array.prototype.slice.call(e.getElementsByClassName("note-low-e")).forEach(t=>this.swaptxt(t,"E"))},async applyAll(e,t){if(!e||Object.keys(e).length===0){this.clear();return}this.applyTitle(e,t),this.applyFingers(e),this.applyStrike(e),this.applyNotes(e)},async applyTitle(e,t){var r=document.getElementById(this.id).getElementsByClassName("chord-name")[0];t?this.swaptxt(r,e.name):(r.setAttributeNS(null,"opacity",0),r.textContent=e.name,this.fadein(r))},async applyFingers(e){[1,2,3,4].forEach(t=>this.applyFinger(t,e))},async applyFinger(e,t){const i=document.getElementById(this.id),r=i.querySelectorAll(`circle.finger-${e}`),s=i.querySelectorAll(`text.finger-${e}`),a=t.fingers.filter(l=>l.finger==e)[0];if(r.length>0&&!a)r.forEach(l=>this.fadeout(l)),s.forEach(l=>this.fadeout(l));else if(r.length==0&&a)a.strings.map(l=>{const[c,g]=this.makeFinger(e,l,a.fret);i.appendChild(c),i.appendChild(g),this.fadein(c),this.fadein(g)});else if(r.length>0&&a){if(r.length>1)for(var n=1;n<r.length;n++)this.fadeout(r[n]),this.fadeout(s[n]);a.strings.length>1&&a.strings.slice(1).map(l=>{const[c,g]=this.makeFinger(e,l,a.fret);i.appendChild(c),i.appendChild(g),this.fadein(c),this.fadein(g)}),this.move(r[0],a.strings[0],a.fret),this.move(s[0],a.strings[0],a.fret)}},makeFinger(e,t,i){const r="http://www.w3.org/2000/svg",s=this.XY(t,i),a=document.createElementNS(r,"circle");a.setAttributeNS(null,"class",`finger finger-${e}`),a.setAttributeNS(null,"cx",s[0]),a.setAttributeNS(null,"cy",s[1]),a.setAttributeNS(null,"r","0.3"),a.setAttributeNS(null,"opacity",0);const n=document.createElementNS(r,"text");return n.setAttributeNS(null,"class",`finger finger-${e}`),n.setAttributeNS(null,"x",s[0]),n.setAttributeNS(null,"y",s[1]),n.setAttributeNS(null,"text-anchor","middle"),n.setAttributeNS(null,"alignment-baseline","middle"),n.setAttributeNS(null,"opacity",0),n.textContent=e,[a,n]},async applyStrike(e){if(!this.chord)return null;const t=document.getElementById(this.id),i=Array.prototype.slice.call(t.getElementsByClassName("strike")),r=[1,2,3,4,5,6].map(s=>e.open.includes(s)?"\u25EF":e.closed.includes(s)?"\uFF38":"");i.forEach((s,a)=>{s.textContent!=r[a]&&this.swaptxt(s,r[a])})},async applyNotes(e){const t=document.getElementById(this.id),i=Array.prototype.slice.call(t.getElementsByClassName("note")),r=[1,2,3,4,5,6].map(s=>{const a=e.fingers.filter(n=>n.strings.includes(s)).map(n=>n.fret);return a.length==0?this.note(s,0):this.note(s,Math.max(...a))});i.forEach((s,a)=>{s.textContent!=r[a]&&this.swaptxt(s,r[a])})},sleep(e){return new Promise(t=>setTimeout(t,e))},XY(e,t){const i=6-e+1,r=1+1.5/2+(t-1)*1.5;return[i,r]},note(e,t){function i(n){if(n=="A")return"A#";if(n=="A#")return"B";if(n=="B")return"C";if(n=="C")return"C#";if(n=="C#")return"D";if(n=="D")return"D#";if(n=="D#")return"E";if(n=="E")return"F";if(n=="F")return"F#";if(n=="F#")return"G";if(n=="G")return"G#";if(n=="G#")return"A"}function r(n){if(n==6)return"E";if(n==5)return"A";if(n==4)return"D";if(n==3)return"G";if(n==2)return"B";if(n==1)return"E"}for(var s=r(e),a=0;a<t;a++)s=i(s);return s},seq(e,t,i){const r=(t-e)/i,s=Array(i-1).fill().map((a,n)=>e+r*(n+1));return s.push(t),s},path(e,t,i){const r=this.seq(e[0],t[0],i),s=this.seq(e[1],t[1],i);return r.map((a,n)=>[a,s[n]])},async fadeout(e){for(var t=0;t<this.frames;t++)await this.sleep(this.frameLength),e.setAttributeNS(null,"opacity",1-(t+1)*(1/this.frames));document.getElementById(this.id).removeChild(e)},async fadein(e){for(var t=0;t<this.frames;t++)await this.sleep(this.frameLength),e.setAttributeNS(null,"opacity",(t+1)*(1/this.frames))},async swaptxt(e,t){const i=Math.floor(this.frames/2),r=this.frames-i;for(var s=0;s<i;s++)await this.sleep(this.frameLength),e.setAttributeNS(null,"opacity",1-(s+1)*(1/i));e.textContent=t;for(var s=0;s<r;s++)await this.sleep(this.frameLength),e.setAttributeNS(null,"opacity",(s+1)*(1/r))},async move(e,t,i){const r=e.tagName=="circle"?"cx":"x",s=e.tagName=="circle"?"cy":"y",a=[parseFloat(e.getAttributeNS(null,r)),parseFloat(e.getAttributeNS(null,s))],n=this.XY(t,i),l=this.path(a,n,this.frames);for(var c=0;c<l.length;c++)await this.sleep(this.frameLength),e.setAttributeNS(null,r,l[c][0]),e.setAttributeNS(null,s,l[c][1])}}},u=["id"],m=[o.createStaticVNode('<rect class="fretboard" x="1" y="1" width="5" height="7.5" data-v-4be956ee></rect><line class="nut" x1="1" y1="1" x2="6" y2="1" data-v-4be956ee></line><line class="fret" x1="1" y1="2.5" x2="6" y2="2.5" data-v-4be956ee></line><line class="fret" x1="1" y1="4" x2="6" y2="4" data-v-4be956ee></line><line class="fret" x1="1" y1="5.5" x2="6" y2="5.5" data-v-4be956ee></line><line class="fret" x1="1" y1="7" x2="6" y2="7" data-v-4be956ee></line><line class="fret" x1="1" y1="8.5" x2="6" y2="8.5" data-v-4be956ee></line><line class="string string-high-e" x1="6" y1="1" x2="6" y2="8.5" data-v-4be956ee></line><line class="string string-b" x1="5" y1="1" x2="5" y2="8.5" data-v-4be956ee></line><line class="string string-g" x1="4" y1="1" x2="4" y2="8.5" data-v-4be956ee></line><line class="string string-d" x1="3" y1="1" x2="3" y2="8.5" data-v-4be956ee></line><line class="string string-a" x1="2" y1="1" x2="2" y2="8.5" data-v-4be956ee></line><line class="string string-low-e" x1="1" y1="1" x2="1" y2="8.5" data-v-4be956ee></line><text class="chord-name" x="3.5" y="0" text-anchor="middle" alignment-baseline="hanging" data-v-4be956ee></text><text class="strike strike-high-e" x="6" y="1" dy="-0.2" text-anchor="middle" alignment-baseline="top" data-v-4be956ee></text><text class="strike strike-b" x="5" y="1" dy="-0.2" text-anchor="middle" alignment-baseline="top" data-v-4be956ee></text><text class="strike strike-g" x="4" y="1" dy="-0.2" text-anchor="middle" alignment-baseline="top" data-v-4be956ee></text><text class="strike strike-d" x="3" y="1" dy="-0.2" text-anchor="middle" alignment-baseline="top" data-v-4be956ee></text><text class="strike strike-a" x="2" y="1" dy="-0.2" text-anchor="middle" alignment-baseline="top" data-v-4be956ee></text><text class="strike strike-low-e" x="1" y="1" dy="-0.2" text-anchor="middle" alignment-baseline="top" data-v-4be956ee></text><text class="note note-high-e" x="6" y="8.5" dy="0.2" text-anchor="middle" alignment-baseline="hanging" data-v-4be956ee>E</text><text class="note note-b" x="5" y="8.5" dy="0.2" text-anchor="middle" alignment-baseline="hanging" data-v-4be956ee>B</text><text class="note note-g" x="4" y="8.5" dy="0.2" text-anchor="middle" alignment-baseline="hanging" data-v-4be956ee>G</text><text class="note note-d" x="3" y="8.5" dy="0.2" text-anchor="middle" alignment-baseline="hanging" data-v-4be956ee>D</text><text class="note note-a" x="2" y="8.5" dy="0.2" text-anchor="middle" alignment-baseline="hanging" data-v-4be956ee>A</text><text class="note note-low-e" x="1" y="8.5" dy="0.2" text-anchor="middle" alignment-baseline="hanging" data-v-4be956ee>E</text>',26)];function y(e,t,i,r,s,a){return o.openBlock(),o.createElementBlock("svg",{id:i.id,class:"chord",viewBox:"0 0 7 9.5"},m,8,u)}const h=d(p,[["render",y],["__scopeId","data-v-4be956ee"]]),x={name:"GuitarChordTransitions",components:{GuitarChord:h},data(){return{chord:null}},props:{id:{type:String,required:!0},duration:{type:Number,default:1e3},fps:{type:Number,default:10},chords:{type:Array,default:[]}},mounted(){this.loop()},methods:{async loop(){for(var e=1;;)await this.sleep(this.duration),this.chord=this.chords[e],e+=1,e>=this.chords.length&&(e=0)},sleep(e){return new Promise(t=>setTimeout(t,e))}}};function b(e,t,i,r,s,a){const n=o.resolveComponent("GuitarChord");return o.openBlock(),o.createBlock(n,{id:`${i.id}-chord`,duration:i.duration/2,fps:i.fps,chord:s.chord},null,8,["id","duration","fps","chord"])}const v=d(x,[["render",b]]),A={A:{name:"A",fingers:[{finger:1,fret:2,strings:[4]},{finger:2,fret:2,strings:[3]},{finger:3,fret:2,strings:[2]}],open:[5,1],closed:[6]},A7:{name:"A Dominant 7",fingers:[{finger:2,fret:2,strings:[4]},{finger:3,fret:2,strings:[2]}],open:[5,3,1],closed:[6]},Am:{name:"A Minor",fingers:[{finger:2,fret:2,strings:[4]},{finger:3,fret:2,strings:[3]},{finger:1,fret:1,strings:[2]}],open:[5,1],closed:[6]},B1:{name:"B",fingers:[{finger:1,fret:2,strings:[1,2,3,4,5]},{finger:2,fret:4,strings:[4]},{finger:3,fret:4,strings:[3]},{finger:4,fret:4,strings:[2]}],open:[],closed:[6]},B2:{name:"B",fingers:[{finger:1,fret:2,strings:[1]},{finger:3,fret:4,strings:[3]},{finger:4,fret:4,strings:[2]}],open:[],closed:[6,5,4]},B7:{name:"B Dominant 7",fingers:[{finger:1,fret:1,strings:[4]},{finger:2,fret:2,strings:[5]},{finger:3,fret:2,strings:[3]},{finger:4,fret:2,strings:[1]}],open:[2],closed:[6]},C:{name:"C",fingers:[{finger:1,fret:1,strings:[2]},{finger:2,fret:2,strings:[4]},{finger:3,fret:3,strings:[5]}],open:[3,1],closed:[6]},C7:{name:"C Dominant 7",fingers:[{finger:1,fret:1,strings:[2]},{finger:2,fret:2,strings:[4]},{finger:3,fret:3,strings:[5]},{finger:4,fret:3,strings:[3]}],open:[1],closed:[6]},D:{name:"D",fingers:[{finger:1,fret:2,strings:[3]},{finger:2,fret:2,strings:[1]},{finger:3,fret:3,strings:[2]}],open:[4],closed:[6,5]},D7:{name:"D Dominant 7",fingers:[{finger:1,fret:1,strings:[2]},{finger:2,fret:2,strings:[3]},{finger:3,fret:2,strings:[1]}],open:[4],closed:[6,5]},Dm:{name:"D Minor",fingers:[{finger:1,fret:1,strings:[1]},{finger:2,fret:2,strings:[3]},{finger:3,fret:3,strings:[2]}],open:[4],closed:[6,5]},E:{name:"E",fingers:[{finger:1,fret:1,strings:[3]},{finger:2,fret:2,strings:[5]},{finger:3,fret:2,strings:[4]}],open:[6,2,1],closed:[]},E7:{name:"E Dominant 7",fingers:[{finger:1,fret:1,strings:[3]},{finger:2,fret:2,strings:[5]}],open:[6,4,2,1],closed:[]},Em:{name:"E Minor",fingers:[{finger:2,fret:2,strings:[5]},{finger:3,fret:2,strings:[4]}],open:[6,3,2,1],closed:[]},F:{name:"F",fingers:[{finger:1,fret:1,strings:[2,1]},{finger:2,fret:2,strings:[3]},{finger:3,fret:3,strings:[4]}],open:[],closed:[6,5]},G:{name:"G",fingers:[{finger:1,fret:2,strings:[5]},{finger:2,fret:3,strings:[6]},{finger:3,fret:3,strings:[1]}],open:[3,4],closed:[]},G7:{name:"G Dominant 7",fingers:[{finger:1,fret:1,strings:[1]},{finger:2,fret:2,strings:[5]},{finger:3,fret:3,strings:[6]}],open:[4,3,2],closed:[]}};f.GuitarChord=h,f.GuitarChordTransitions=v,f.chords=A,Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
