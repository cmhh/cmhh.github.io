(function(o,g){typeof exports=="object"&&typeof module<"u"?g(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],g):(o=typeof globalThis<"u"?globalThis:o||self,g(o.chordvuer={},o.Vue))})(this,function(o,g){"use strict";const E="",m=(e,t)=>{const r=e.__vccOpts||e;for(const[i,n]of t)r[i]=n;return r},u={name:"GuitarChord",props:{id:{type:String,required:!0},duration:{type:Number,default:1e3},fps:{type:Number,default:10},chord:{type:Object,default:{}}},computed:{frames(){const e=this.duration/1e3;return Math.ceil(this.fps*e)},frameLength(){return 1e3/this.fps}},watch:{chord(e,t){this.applyAll(e,t)}},mounted(){this.applyAll(this.chord,null)},methods:{async clear(){const e=document.getElementById(this.id);Array.prototype.slice.call(e.getElementsByClassName("finger")).forEach(t=>e.removeChild(t)),Array.prototype.slice.call(e.getElementsByClassName("chord-name")).forEach(t=>this.swaptxt(t,"")),Array.prototype.slice.call(e.getElementsByClassName("strike")).forEach(t=>this.swaptxt(t,"")),Array.prototype.slice.call(e.getElementsByClassName("note-high-e")).forEach(t=>this.swaptxt(t,"E")),Array.prototype.slice.call(e.getElementsByClassName("note-b")).forEach(t=>this.swaptxt(t,"B")),Array.prototype.slice.call(e.getElementsByClassName("note-g")).forEach(t=>this.swaptxt(t,"G")),Array.prototype.slice.call(e.getElementsByClassName("note-d")).forEach(t=>this.swaptxt(t,"D")),Array.prototype.slice.call(e.getElementsByClassName("note-a")).forEach(t=>this.swaptxt(t,"A")),Array.prototype.slice.call(e.getElementsByClassName("note-low-e")).forEach(t=>this.swaptxt(t,"E"))},async applyAll(e,t){if(!e||Object.keys(e).length===0){this.clear();return}this.applyTitle(e,t),this.applyFingers(e),this.applyStrike(e),this.applyNotes(e),this.applyFrets(e)},async applyTitle(e,t){var i=document.getElementById(this.id).getElementsByClassName("chord-name")[0];t?this.swaptxt(i,e.name):(i.setAttributeNS(null,"opacity",0),i.textContent=e.name,this.fadein(i))},async applyFrets(e){const t=document.getElementById(this.id),r=Array.prototype.slice.call(t.getElementsByClassName("fret-number")),i=this.fretOffset(e),n=[1,2,3,4,5].map(a=>i==0?"":`${a+i}`);r.forEach((a,s)=>{a.textContent!=n[s]&&this.swaptxt(a,n[s])})},async applyFingers(e){[1,2,3,4].forEach(t=>this.applyFinger(t,e))},async applyFinger(e,t){const r=document.getElementById(this.id),i=this.fretOffset(t),n=r.querySelectorAll(`circle.finger-${e}`),a=r.querySelectorAll(`text.finger-${e}`),s=t.fingers.filter(l=>l.finger==e)[0];if(n.length>0&&!s)n.forEach(l=>this.fadeout(l)),a.forEach(l=>this.fadeout(l));else if(n.length==0&&s)s.strings.map(l=>{const[d,h]=this.makeFinger(e,l,s.fret-i);r.appendChild(d),r.appendChild(h),this.fadein(d),this.fadein(h)});else if(n.length>0&&s){if(n.length>1)for(var c=1;c<n.length;c++)this.fadeout(n[c]),this.fadeout(a[c]);s.strings.length>1&&s.strings.slice(1).map(l=>{const[d,h]=this.makeFinger(e,l,s.fret-i);r.appendChild(d),r.appendChild(h),this.fadein(d),this.fadein(h)}),this.move(n[0],s.strings[0],s.fret-i),this.move(a[0],s.strings[0],s.fret-i)}},makeFinger(e,t,r){const i="http://www.w3.org/2000/svg",n=this.XY(t,r),a=document.createElementNS(i,"circle");a.setAttributeNS(null,"class",`finger finger-${e}`),a.setAttributeNS(null,"cx",n[0]),a.setAttributeNS(null,"cy",n[1]),a.setAttributeNS(null,"r","15"),a.setAttributeNS(null,"opacity",0);const s=document.createElementNS(i,"text");return s.setAttributeNS(null,"class",`finger finger-${e}`),s.setAttributeNS(null,"x",n[0]),s.setAttributeNS(null,"y",n[1]),s.setAttributeNS(null,"text-anchor","middle"),s.setAttributeNS(null,"alignment-baseline","middle"),s.setAttributeNS(null,"opacity",0),s.textContent=e,[a,s]},async applyStrike(e){if(!this.chord)return null;const t=document.getElementById(this.id),r=Array.prototype.slice.call(t.getElementsByClassName("strike")),i=[1,2,3,4,5,6].map(n=>e.open.includes(n)?"\u25EF":e.closed.includes(n)?"\uFF38":"");r.forEach((n,a)=>{n.textContent!=i[a]&&this.swaptxt(n,i[a])})},async applyNotes(e){const t=document.getElementById(this.id),r=Array.prototype.slice.call(t.getElementsByClassName("note")),i=[1,2,3,4,5,6].map(n=>{if(e.closed.includes(n))return"";const a=e.fingers.filter(s=>s.strings.includes(n)).map(s=>s.fret);return a.length==0?this.note(n,0):this.note(n,Math.max(...a))});r.forEach((n,a)=>{n.textContent!=i[a]&&this.swaptxt(n,i[a])})},sleep(e){return new Promise(t=>setTimeout(t,e))},XY(e,t){const r=6-e+1,i=1+1.5/2+(t-1)*1.5;return[r*50,i*50]},note(e,t){function r(s){if(s=="A")return"A#";if(s=="A#")return"B";if(s=="B")return"C";if(s=="C")return"C#";if(s=="C#")return"D";if(s=="D")return"D#";if(s=="D#")return"E";if(s=="E")return"F";if(s=="F")return"F#";if(s=="F#")return"G";if(s=="G")return"G#";if(s=="G#")return"A"}function i(s){if(s==6)return"E";if(s==5)return"A";if(s==4)return"D";if(s==3)return"G";if(s==2)return"B";if(s==1)return"E"}for(var n=i(e),a=0;a<t;a++)n=r(n);return n},seq(e,t,r){const i=(t-e)/r,n=Array(r-1).fill().map((a,s)=>e+i*(s+1));return n.push(t),n},path(e,t,r){const i=this.seq(e[0],t[0],r),n=this.seq(e[1],t[1],r);return i.map((a,s)=>[a,n[s]])},fretOffset(e){const t=e.fingers.map(r=>r.fret);return Math.max(...t)<=5?0:Math.min(...t)-2},async fadeout(e){for(var t=0;t<this.frames;t++)await this.sleep(this.frameLength),e.setAttributeNS(null,"opacity",1-(t+1)*(1/this.frames));document.getElementById(this.id).removeChild(e)},async fadein(e){for(var t=0;t<this.frames;t++)await this.sleep(this.frameLength),e.setAttributeNS(null,"opacity",(t+1)*(1/this.frames))},async swaptxt(e,t){const r=Math.floor(this.frames/2),i=this.frames-r;for(var n=0;n<r;n++)await this.sleep(this.frameLength),e.setAttributeNS(null,"opacity",1-(n+1)*(1/r));e.textContent=t;for(var n=0;n<i;n++)await this.sleep(this.frameLength),e.setAttributeNS(null,"opacity",(n+1)*(1/i))},async move(e,t,r){const i=e.tagName=="circle"?"cx":"x",n=e.tagName=="circle"?"cy":"y",a=[parseFloat(e.getAttributeNS(null,i)),parseFloat(e.getAttributeNS(null,n))],s=this.XY(t,r),c=this.path(a,s,this.frames);for(var l=0;l<c.length;l++)await this.sleep(this.frameLength),e.setAttributeNS(null,i,c[l][0]),e.setAttributeNS(null,n,c[l][1])}}},y=["id"],x=[g.createStaticVNode('<rect class="fretboard" x="50" y="50" width="250" height="375" data-v-6e46b1c0></rect><line class="nut" x1="50" y1="50" x2="300" y2="50" data-v-6e46b1c0></line><line class="fret" x1="50" y1="125" x2="300" y2="125" data-v-6e46b1c0></line><line class="fret" x1="50" y1="200" x2="300" y2="200" data-v-6e46b1c0></line><line class="fret" x1="50" y1="275" x2="300" y2="275" data-v-6e46b1c0></line><line class="fret" x1="50" y1="350" x2="300" y2="350" data-v-6e46b1c0></line><line class="fret" x1="50" y1="425" x2="300" y2="425" data-v-6e46b1c0></line><text class="fret-number" x="27.5" y="87.5" text-anchor="middle" alignment-baseline="middle" data-v-6e46b1c0>1</text><text class="fret-number" x="27.5" y="162.5" text-anchor="middle" alignment-baseline="middle" data-v-6e46b1c0>2</text><text class="fret-number" x="27.5" y="237.5" text-anchor="middle" alignment-baseline="middle" data-v-6e46b1c0>3</text><text class="fret-number" x="27.5" y="312.5" text-anchor="middle" alignment-baseline="middle" data-v-6e46b1c0>4</text><text class="fret-number" x="27.5" y="387.5" text-anchor="middle" alignment-baseline="middle" data-v-6e46b1c0>5</text><line class="string string-high-e" x1="300" y1="50" x2="300" y2="425" data-v-6e46b1c0></line><line class="string string-b" x1="250" y1="50" x2="250" y2="425" data-v-6e46b1c0></line><line class="string string-g" x1="200" y1="50" x2="200" y2="425" data-v-6e46b1c0></line><line class="string string-d" x1="150" y1="50" x2="150" y2="425" data-v-6e46b1c0></line><line class="string string-a" x1="100" y1="50" x2="100" y2="425" data-v-6e46b1c0></line><line class="string string-low-e" x1="50" y1="50" x2="50" y2="425" data-v-6e46b1c0></line><text class="chord-name" x="175" y="0" text-anchor="middle" alignment-baseline="hanging" data-v-6e46b1c0></text><text class="strike strike-high-e" x="300" y="50" dy="-10" text-anchor="middle" alignment-baseline="top" data-v-6e46b1c0></text><text class="strike strike-b" x="250" y="50" dy="-10" text-anchor="middle" alignment-baseline="top" data-v-6e46b1c0></text><text class="strike strike-g" x="200" y="50" dy="-10" text-anchor="middle" alignment-baseline="top" data-v-6e46b1c0></text><text class="strike strike-d" x="150" y="50" dy="-10" text-anchor="middle" alignment-baseline="top" data-v-6e46b1c0></text><text class="strike strike-a" x="100" y="50" dy="-10" text-anchor="middle" alignment-baseline="top" data-v-6e46b1c0></text><text class="strike strike-low-e" x="50" y="50" dy="-10" text-anchor="middle" alignment-baseline="top" data-v-6e46b1c0></text><text class="note note-high-e" x="300" y="425" dy="10" text-anchor="middle" alignment-baseline="hanging" data-v-6e46b1c0>E</text><text class="note note-b" x="250" y="425" dy="10" text-anchor="middle" alignment-baseline="hanging" data-v-6e46b1c0>B</text><text class="note note-g" x="200" y="425" dy="10" text-anchor="middle" alignment-baseline="hanging" data-v-6e46b1c0>G</text><text class="note note-d" x="150" y="425" dy="10" text-anchor="middle" alignment-baseline="hanging" data-v-6e46b1c0>D</text><text class="note note-a" x="100" y="425" dy="10" text-anchor="middle" alignment-baseline="hanging" data-v-6e46b1c0>A</text><text class="note note-low-e" x="50" y="425" dy="10" text-anchor="middle" alignment-baseline="hanging" data-v-6e46b1c0>E</text>',31)];function b(e,t,r,i,n,a){return g.openBlock(),g.createElementBlock("svg",{id:r.id,class:"chord",viewBox:"0 0 350 475",height:"auto",width:"auto"},x,8,y)}const p=m(u,[["render",b],["__scopeId","data-v-6e46b1c0"]]),_={name:"GuitarChordTransitions",components:{GuitarChord:p},data(){return{chord:null}},props:{id:{type:String,required:!0},duration:{type:Number,default:1e3},fps:{type:Number,default:10},chords:{type:Array,default:[]}},mounted(){this.loop()},methods:{async loop(){for(var e=1;;)await this.sleep(this.duration),this.chord=this.chords[e],e+=1,e>=this.chords.length&&(e=0)},sleep(e){return new Promise(t=>setTimeout(t,e))}}};function A(e,t,r,i,n,a){const s=g.resolveComponent("GuitarChord");return g.openBlock(),g.createBlock(s,{id:`${r.id}-chord`,duration:r.duration/2,fps:r.fps,chord:n.chord},null,8,["id","duration","fps","chord"])}const v=m(_,[["render",A]]),f={"A\u266D5":{name:"G\u266F5 / A\u266D5",fingers:[{finger:1,fret:4,strings:[6]},{finger:3,fret:6,strings:[5]},{finger:4,fret:6,strings:[4]}],open:[],closed:[3,2,1]},A:{name:"A",fingers:[{finger:1,fret:2,strings:[4]},{finger:2,fret:2,strings:[3]},{finger:3,fret:2,strings:[2]}],open:[5,1],closed:[6]},A5_1:{name:"A5",fingers:[{finger:1,fret:2,strings:[4]},{finger:2,fret:2,strings:[3]}],open:[5],closed:[6,2,1]},A5_2:{name:"A5",fingers:[{finger:1,fret:5,strings:[6]},{finger:3,fret:7,strings:[5]},{finger:4,fret:7,strings:[4]}],open:[],closed:[3,2,1]},A7:{name:"A Dominant 7",fingers:[{finger:2,fret:2,strings:[4]},{finger:3,fret:2,strings:[2]}],open:[5,3,1],closed:[6]},Am:{name:"A Minor",fingers:[{finger:2,fret:2,strings:[4]},{finger:3,fret:2,strings:[3]},{finger:1,fret:1,strings:[2]}],open:[5,1],closed:[6]},B_1:{name:"B",fingers:[{finger:1,fret:2,strings:[1,2,3,4,5]},{finger:2,fret:4,strings:[4]},{finger:3,fret:4,strings:[3]},{finger:4,fret:4,strings:[2]}],open:[],closed:[6]},B_2:{name:"B",fingers:[{finger:1,fret:2,strings:[1]},{finger:3,fret:4,strings:[3]},{finger:4,fret:4,strings:[2]}],open:[],closed:[6,5,4]},B5_1:{name:"B5",fingers:[{finger:1,fret:2,strings:[5]},{finger:3,fret:4,strings:[4]},{finger:4,fret:4,strings:[3]}],open:[],closed:[6,2,1]},B5_2:{name:"B5",fingers:[{finger:1,fret:7,strings:[6]},{finger:3,fret:9,strings:[5]},{finger:4,fret:9,strings:[4]}],open:[],closed:[3,2,1]},B7:{name:"B Dominant 7",fingers:[{finger:1,fret:1,strings:[4]},{finger:2,fret:2,strings:[5]},{finger:3,fret:2,strings:[3]},{finger:4,fret:2,strings:[1]}],open:[2],closed:[6]},C:{name:"C",fingers:[{finger:1,fret:1,strings:[2]},{finger:2,fret:2,strings:[4]},{finger:3,fret:3,strings:[5]}],open:[3,1],closed:[6]},C5:{name:"C5",fingers:[{finger:1,fret:3,strings:[5]},{finger:3,fret:5,strings:[4]},{finger:4,fret:5,strings:[3]}],open:[],closed:[6,2,1]},C7:{name:"C Dominant 7",fingers:[{finger:1,fret:1,strings:[2]},{finger:2,fret:2,strings:[4]},{finger:3,fret:3,strings:[5]},{finger:4,fret:3,strings:[3]}],open:[1],closed:[6]},D:{name:"D",fingers:[{finger:1,fret:2,strings:[3]},{finger:2,fret:2,strings:[1]},{finger:3,fret:3,strings:[2]}],open:[4],closed:[6,5]},D5_1:{name:"D5",fingers:[{finger:1,fret:2,strings:[3]}],open:[4],closed:[6,5,2,1]},D5_2:{name:"D5",fingers:[{finger:1,fret:5,strings:[5]},{finger:3,fret:7,strings:[4]},{finger:4,fret:7,strings:[3]}],open:[],closed:[6,2,1]},D7:{name:"D Dominant 7",fingers:[{finger:1,fret:1,strings:[2]},{finger:2,fret:2,strings:[3]},{finger:3,fret:2,strings:[1]}],open:[4],closed:[6,5]},Dm:{name:"D Minor",fingers:[{finger:1,fret:1,strings:[1]},{finger:2,fret:2,strings:[3]},{finger:3,fret:3,strings:[2]}],open:[4],closed:[6,5]},E:{name:"E",fingers:[{finger:1,fret:1,strings:[3]},{finger:2,fret:2,strings:[5]},{finger:3,fret:2,strings:[4]}],open:[6,2,1],closed:[]},E5_1:{name:"E5",fingers:[{finger:1,fret:2,strings:[5]},{finger:2,fret:2,strings:[4]}],open:[6],closed:[3,2,1]},E5_2:{name:"E5",fingers:[{finger:1,fret:7,strings:[5]},{finger:3,fret:9,strings:[4]},{finger:4,fret:9,strings:[3]}],open:[],closed:[6,2,1]},E7:{name:"E Dominant 7",fingers:[{finger:1,fret:1,strings:[3]},{finger:2,fret:2,strings:[5]}],open:[6,4,2,1],closed:[]},Em:{name:"E Minor",fingers:[{finger:2,fret:2,strings:[5]},{finger:3,fret:2,strings:[4]}],open:[6,3,2,1],closed:[]},F_1:{name:"F",fingers:[{finger:1,fret:1,strings:[2,1]},{finger:2,fret:2,strings:[3]},{finger:3,fret:3,strings:[4]}],open:[],closed:[6,5]},F_2:{name:"F",fingers:[{finger:1,fret:1,strings:[6,5,4,3,2,1]},{finger:2,fret:2,strings:[3]},{finger:3,fret:3,strings:[5]},{finger:4,fret:3,strings:[4]}],open:[],closed:[]},F_3:{name:"F",fingers:[{finger:1,fret:1,strings:[6]},{finger:3,fret:3,strings:[5]},{finger:4,fret:3,strings:[4]}],open:[],closed:[6,5]},F5:{name:"F5",fingers:[{finger:1,fret:1,strings:[6]},{finger:3,fret:3,strings:[5]},{finger:4,fret:3,strings:[4]}],open:[],closed:[3,2,1]},"F\u266F5":{name:"F\u266F5 / G\u266D5",fingers:[{finger:1,fret:2,strings:[6]},{finger:3,fret:4,strings:[5]},{finger:4,fret:4,strings:[4]}],open:[],closed:[3,2,1]},"G\u266D5":{name:"F\u266F5 / G\u266D5",fingers:[{finger:1,fret:2,strings:[6]},{finger:3,fret:4,strings:[5]},{finger:4,fret:4,strings:[4]}],open:[],closed:[3,2,1]},G:{name:"G",fingers:[{finger:1,fret:2,strings:[5]},{finger:2,fret:3,strings:[6]},{finger:3,fret:3,strings:[2]},{finger:4,fret:3,strings:[1]}],open:[3,4],closed:[]},"G\u266F5":{name:"G\u266F5 / A\u266D5",fingers:[{finger:1,fret:4,strings:[6]},{finger:3,fret:6,strings:[5]},{finger:4,fret:6,strings:[4]}],open:[],closed:[3,2,1]},G5:{name:"G5",fingers:[{finger:1,fret:3,strings:[6]},{finger:3,fret:5,strings:[5]},{finger:4,fret:5,strings:[4]}],open:[],closed:[3,2,1]},G7:{name:"G Dominant 7",fingers:[{finger:1,fret:1,strings:[1]},{finger:2,fret:2,strings:[5]},{finger:3,fret:3,strings:[6]}],open:[4,3,2],closed:[]}};f["A\u266D5"],f.A5_1,f.A5_2,f.B5_1,f.B5_2,f.C5,f.D5_1,f.D5_2,f.E5_1,f.E5_2,f.F_3,f["F\u266F5"],f["G\u266D5"],o.GuitarChord=p,o.GuitarChordTransitions=v,o.chords=f,Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
