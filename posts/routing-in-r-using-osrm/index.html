<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Chris Hansen">
<meta name="dcterms.date" content="2016-11-27">
<meta name="description" content="I often find myself needing to establish the travel time or distance between arrays of addresses from R. Here we describe how we can use a local install of Open Source Routing Machine as a solution which is highly performant, and relatively easy to implement.">

<title>cmhh - Routing in R Using the Open Source Routing Machine (OSRM)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<style>
    .quarto-title-block .quarto-title-banner {
      background-image: url(../../img/banner-2.jpg);
background-size: cover;
    }
    </style>
<script src="../../site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="../../site_libs/jquery-1.12.4/jquery.min.js"></script>
<link href="../../site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="../../site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="../../site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="../../site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="../../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="../../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="../../site_libs/leaflet-binding-2.1.1/leaflet.js"></script>


<link rel="stylesheet" href="../../css/styles.css">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">cmhh</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/cmhh" rel=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Routing in R Using the Open Source Routing Machine (OSRM)</h1>
                  <div>
        <div class="description">
          I often find myself needing to establish the travel time or distance between arrays of addresses from R. Here we describe how we can use a local install of Open Source Routing Machine as a solution which is highly performant, and relatively easy to implement.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">R</div>
                <div class="quarto-category">geospatial</div>
                <div class="quarto-category">OSRM</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Chris Hansen </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 27, 2016</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#prerequisites" id="toc-prerequisites" class="nav-link" data-scroll-target="#prerequisites">Prerequisites</a></li>
  <li><a href="#geocoding-addresses" id="toc-geocoding-addresses" class="nav-link" data-scroll-target="#geocoding-addresses">Geocoding addresses</a></li>
  <li><a href="#open-source-routing-machine-osrm" id="toc-open-source-routing-machine-osrm" class="nav-link" data-scroll-target="#open-source-routing-machine-osrm">Open Source Routing Machine (OSRM)</a></li>
  <li><a href="#using-leaflet-to-make-a-nicer-map" id="toc-using-leaflet-to-make-a-nicer-map" class="nav-link" data-scroll-target="#using-leaflet-to-make-a-nicer-map">Using <code>leaflet</code> to make a nicer map</a></li>
  </ul>
</nav>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<div class="cell" data-layout-align="center">

</div>
<section id="overview" class="level1">
<h1>Overview</h1>
<p><strong>Edit 2020-07-16</strong>: The original version of this post included a bespoke decoder for geometries encoded as Google polylines. The post has been updated to use the <code>googlePolylines</code> package instead.</p>
<p>I often find myself needing to establish the travel time or distance between arrays of addresses. In the past I have used ArcMap’s Network Analyst tool, but have found the syntax to be clunky at best, and the performance to be very mediocre. And, besides, I am often working in R and sometimes it’s nice to be able to do everything in the one environment, rather than doing the routing in Python, say, and then using the results in R.</p>
<p>The <a href="http://project-osrm.org/">open source routing machine</a> is a very fast routing engine which can be accessed via an <a href="https://github.com/Project-OSRM/osrm-backend/blob/master/docs/http.md">HTTP API</a>, which means it can be queried relatively easy from most languages, including R. And while public servers are available for use, it is also relatively easy to set up locally resulting in excellent throughput due to the lack of latency.</p>
</section>
<section id="prerequisites" class="level1">
<h1>Prerequisites</h1>
<p>The following R packages are required:</p>
<ul>
<li><code>rjson</code> for reading web service results in JSON format</li>
<li><code>bitops</code> used to decode polylines (has convenient bitshift operators, etc.)</li>
<li><code>sp</code> for spatial projections, etc.</li>
<li><code>leaflet</code> for rendering <a href="http://leafletjs.com/">leaflet</a> maps in a browser</li>
<li><code>googlePolylines</code> for converting routes returned from OSRM to <code>sp</code>-compatible paths</li>
</ul>
</section>
<section id="geocoding-addresses" class="level1">
<h1>Geocoding addresses</h1>
<p>The <a href="https://developer.here.com/products/geocoding-and-search">HERE Geocoding &amp; Search</a> API is used to geocode addresses. Usage is free, but the free license is limited to 1000 requests per day, at a rate no faster than 5 per second. There are free alternatives, but I’ve not found any that are satisfactorally accurate for New Zealand addresses. That said, interesting alternatives worth keeping an eye on are:</p>
<ul>
<li><a href="http://www.datasciencetoolkit.org/">data science toolkit</a> - doesn’t work at all for New Zealand</li>
<li><a href="http://wiki.openstreetmap.org/wiki/Nominatim">Nominatim</a> - finds addresses but probably only okay if approximate locations are acceptable.</li>
</ul>
<p>The following code results in two addresses being geocoded which we will use as an origin and a destination later when using a routing service.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rjson)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># use HERE API to geocode a start point...</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>get_location <span class="ot">&lt;-</span> <span class="cf">function</span>(</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  search_text,</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">app_id =</span> params<span class="sc">$</span>app_id, </span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">app_code =</span> params<span class="sc">$</span>app_code</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>) {</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  service <span class="ot">&lt;-</span> <span class="st">"https://geocoder.api.here.com/6.2/geocode.json"</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  query <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"%s?app_id=%s&amp;app_code=%s&amp;searchtext=%s"</span>,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    service, app_id, app_code,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"%20"</span>, search_text, <span class="at">fixed =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  res1 <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(query, <span class="at">simplifyVector =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  res2 <span class="ot">&lt;-</span> res1<span class="sc">$</span>Response<span class="sc">$</span>View[[<span class="dv">1</span>]]<span class="sc">$</span>Result[[<span class="dv">1</span>]]<span class="sc">$</span>Location</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">lng =</span> res2<span class="sc">$</span>DisplayPosition<span class="sc">$</span>Longitude, </span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">lat =</span> res2<span class="sc">$</span>DisplayPosition<span class="sc">$</span>Latitude, </span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">address =</span> res2<span class="sc">$</span>Address<span class="sc">$</span>Label</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="co"># start point...</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>(o <span class="ot">&lt;-</span> <span class="fu">get_location</span>(<span class="st">"25 Edelweiss Grove, Timberlea, Upper Hutt"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$lng
[1] 175.1085

$lat
[1] -41.10678

$address
[1] "25 Edelweiss Grv, Timberlea, Upper Hutt 5018, New Zealand"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ...and destination</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>(d <span class="ot">&lt;-</span> <span class="fu">get_location</span>(<span class="st">"1 Pipitea Street, Wellington"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$lng
[1] 174.7811

$lat
[1] -41.27568

$address
[1] "1 Pipitea St, Thorndon, Wellington 6011, New Zealand"</code></pre>
</div>
</div>
</section>
<section id="open-source-routing-machine-osrm" class="level1">
<h1>Open Source Routing Machine (OSRM)</h1>
<p><a href="http://project-osrm.org/">Open Source Routing Machine</a> is an open source route solver. It is written in C++ and runs on Linux (maybe other platforms, but stick with Linux), and is very fast. There is a nice web demo which uses the service as a back-end <a href="http://map.project-osrm.org">here</a>. The back-end service is available to the public at <a href="https://router.project-osrm.org">https://router.project-osrm.org</a>. Details, including usage policy, is available <a href="https://github.com/Project-OSRM/osrm-backend/wiki/API%20Usage%20Policy">here</a>.</p>
<p>The code below shows how to find a route between the origin and destination locations found above:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://router.project-osrm.org/route/v1/driving/"</span>,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  o<span class="sc">$</span>lng,<span class="st">","</span>,o<span class="sc">$</span>lat,<span class="st">";"</span>,d<span class="sc">$</span>lng,<span class="st">","</span>,d<span class="sc">$</span>lat,<span class="st">"?overview=full"</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>route <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(url, <span class="at">simplifyVector =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Again, assuming a route was successfully found, <code>route</code> will now contain a list including, among other things, time in seconds to traverse the route, distance in metres, and the route geometry stored in <a href="https://developers.google.com/maps/documentation/utilities/polylinealgorithm">encoded polyline algorithm format</a>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>route<span class="sc">$</span>routes[[<span class="dv">1</span>]]<span class="sc">$</span>duration</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1734.7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>route<span class="sc">$</span>routes[[<span class="dv">1</span>]]<span class="sc">$</span>distance</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 35333.2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>route<span class="sc">$</span>routes[[<span class="dv">1</span>]]<span class="sc">$</span>geometry</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "~t{yFozwk`@[hAo@rAOKMEOAO?MBqBfBIHBH@H@HTj@BFBJ?JBFBFDDDBDFn@|AJVHXF\\b@pCJf@BP?F@DDDDDNRRXJJLLzB~APJLDFBF@H@J@LANATCt@MPAP@NBJDLDFFJHNRPXHJHFJDLBJ?J?XAH?HBHDFDHJlCrE`A~AHNBF@F?H?HAF?DCDIJeBdCyAlBcCjDMRIPEHELGXQz@@X@H@DBFHNH@JDf@BXBTF^BhBJt@Fb@H`@JVH^PXPZRLJTVVZJJNVHPLTTb@P`@PDL^N`@HPHVFNFLf@vAPj@Pl@Db@`@jBXbATlANjAHd@FbAHrA@P@HJbBHzAL|AJxAHjAJjA@PTfC\\bDXhC\\dDZlC\\`DRjBP`ARhBNpALtAHzA@FBRDTVtELzB?zAN`EL`DNpDH~AFpBHtBBhABjA@hA?tA?|@Cz@IhEA`A?l@?j@@~@B`ABt@Hr@^~ON~G?V@n@Bn@@xA?jAAxAC|BGzFGV?`BEpY?bE?dB@fBBxAD~ADpAFjAFlAJpAPnBNtANvAR|ATzAn@hD^hAf@pBPr@Pr@Z`A\\`APf@z@xB^|@lAfCJNj@dAd@x@`@r@l@bAtBdD|BnD~BjDlAjBp@~@d@r@T^P^L^L`@Fb@Hf@Fl@@b@@V?XA`@C^EPCTKrBA^Ab@A^?\\@Z@ZBXD`@DXFZH^J\\N^P`@Vf@p@pARVp@rAZr@N^x@dCvBxGvAjFfAnEb@zA^jAh@~AjArCVl@d@fAdAlB~@`B|A~BzD`G|CtEfC|DzBjDfBlCh@x@~@zA`@p@d@z@h@bAh@dAt@|A|@xB\\~@h@`Bh@|A\\fA|@|Cz@jCp@nBj@|Az@zBr@jBfAdCf@dAh@jAdArBz@`Bp@lA~A`Dr@xAp@|Af@fAhAvCv@xBfA~Cj@zAb@fAr@dB|@lBt@zAbAjB~@~AfBlC`ClDhB~Bt@fAl@|@f@`Ad@x@\\v@Tl@d@pAf@bBH\\j@pBb@~Al@xBXpAR~@XzAVpATz@V~@Tv@~AzEfBhF`@hA`@hAj@nAn@pAt@rA^l@bApAtBlCJNLNLNJLLNLLLNLLLLNLLLLLLJNLLJNJNLLJNHxCtBNJLJNJNJLLNJLLLJNLLLLLLLLLLNLLLNLLLNJNLNLNJNJNLPJNJNLPJPJNJPHPJPlNhWnCbFJRJRHPJRJRJRHRJRHRHRHRJTHRHTHRHTFRHTHTFRHTnBzGHTFTHTFTHTHRFTHTHRHTHRHTHRJRHTHRJRHRJRHRJRJRJPHRJRJPJRJPJRLPJPJRJPLPJPLPJPLNLPJPLNLPLNLPLNLNLNLNLNLNLNNNLLNNLNLLNLNNzDpDLLNLLLLLLNLLLNJLLNLLLNJNLNLNJNLNJPJNLNJPJNJPJN~DxGLNJPJPJNJPJNLPJNJPJNLNJPJNLNJNxHdKhBdCpBnCxB`DzAjClAfClB|Dv@vA`A|AjA|AvAbBtCnDpCbDfAzAbA`BnA`CvA~Ch@hAl@hA`@r@b@r@b@p@Z`@r@|@t@x@pBrB|BbCxE~E~BbCvAxAfAlApA`BbBhCnCtEtC|EpAxB`@v@`@v@^v@rAzC~AtDlDdIvDxIpAxC`AnBjBlDjBfDz@zAjArBr@hAFJHNb@z@|@pBHNj@rAx@dBZl@Zl@rAfCx@|ApB~DvBpExBzE~AjD`@`A|AjD@BPZjAnCtC|GxBdFj@nAd@hAl@nApAlCbArBp@tAb@`Ar@fBn@xAVp@d@bA`AzBxA~CvChGhDdHTb@N`@Vh@nAxCFFFLDJXt@\\bAPl@Nb@FNFNJPPj@|@`CnAfDnDjJpAjD`@bA^t@vBnDn@rAt@xA|AfDbA~Bz@xBt@dBdAbCf@pAjCjHxBzFv@~Bh@pAt@nAdAlBt@fA|@rAnAlB~BlDx@tAbCrDvA~Bn@dAbAzBr@rARf@^|@j@~Ah@vAh@zAXfAVv@ZdAZ~@h@xA\\z@\\`A`A`Cp@fBLd@j@|AZfAx@xCjApEhB|Gv@pCv@jCfCjHt@pBb@hAh@vAhAdDj@hBf@`B`@zAz@bDv@dDvAdG~AlHf@xBRbALx@Jz@Hx@Fv@Bp@BdA@`AAp@?VAX?HA^C\\C\\CXI|@Eb@CVA\\?T@XBVF^Lh@R|@^~ApCrL|AxG~AhH^`Bb@|AtAhD^dAZhATnATlAj@~CxBvMrAnIZdBXbA^bAl@tAp@dAv@~@|@x@nCbCh@l@^l@p@lAb@bAd@~A~@lE\\|A\\fAd@jAj@`A^h@`@f@`GvGlCrDlCtExG~M~IfR~ExH`ElIfFxKrBjElBjE`AnBpArCx@bBjAtBjAnBlBhCfBdC~@rAr@bAp@fAj@~@x@zAn@hAx@vAx@~A`AfBfBrDnArCdFbL~@pBj@lAn@dAj@|@b@n@j@n@v@|@`AbAt@~@h@r@dA|Av@xA`@|@`@bAlAvCj@`Bj@tB`@jBd@pCd@xCf@dCr@fCbAbDfBrFb@nAl@`Br@`BjAbCrBfDrAhBz@bA|@~@fAdAz@t@vApAv@t@h@h@f@n@^n@h@bA`@bAt@tBn@`B^`Ad@~@NXVZf@n@j@l@pCfCpDdDv@t@hIpJz@`AzAtA~AxAtIvHl@p@p@~@Zh@xFnIh@p@TRZLVFV?ZAp@Ox@ULGhAm@l@YtAs@ZQr@]BCj@YXOVMPInAo@BaDBqA?GAGAIFCDAB???"</code></pre>
</div>
</div>
<p>We then call a function to convert the encoded route to a <code>SpatialLines</code> object:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>path <span class="ot">&lt;-</span> googlePolylines<span class="sc">::</span><span class="fu">decode</span>(route<span class="sc">$</span>routes[[<span class="dv">1</span>]]<span class="sc">$</span>geometry)[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/plot-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="using-leaflet-to-make-a-nicer-map" class="level1">
<h1>Using <code>leaflet</code> to make a nicer map</h1>
<p>It is relatively easy to make a nice interactive map. Here we draw a simple <a href="http://leafletjs.com/">leaflet</a> map, and overlay the origin and destination points, as well as the route between.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">#make a string to nicely label the route</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> route<span class="sc">$</span>routes[[<span class="dv">1</span>]]<span class="sc">$</span>duration</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>kms <span class="ot">&lt;-</span> <span class="fu">round</span>(route<span class="sc">$</span>routes[[<span class="dv">1</span>]]<span class="sc">$</span>distance<span class="sc">/</span><span class="dv">1000</span>, <span class="dv">1</span>)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>routelabel <span class="ot">&lt;-</span> <span class="fu">paste0</span>(s<span class="sc">%/%</span><span class="dv">60</span>, <span class="st">"m "</span>, s<span class="sc">%%</span><span class="dv">60</span>, <span class="st">"s , "</span>, kms, <span class="st">"kms"</span>)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co">#create a basic map</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">leaflet</span>(<span class="at">width=</span><span class="st">"100%"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addTiles</span>()  <span class="sc">%&gt;%</span> </span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addPolylines</span>(</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">lng =</span> path<span class="sc">$</span>lon,</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">lat =</span> path<span class="sc">$</span>lat,</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">popup =</span> routelabel, </span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"#000000"</span>, </span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">opacity =</span> <span class="dv">1</span>, </span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">weight =</span> <span class="dv">3</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMarkers</span>(<span class="at">lng=</span>o<span class="sc">$</span>lng, <span class="at">lat=</span>o<span class="sc">$</span>lat, <span class="at">popup=</span>o<span class="sc">$</span>address) <span class="sc">%&gt;%</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMarkers</span>(<span class="at">lng=</span>d<span class="sc">$</span>lng, <span class="at">lat=</span>d<span class="sc">$</span>lat, <span class="at">popup=</span>d<span class="sc">$</span>address)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="htmlwidget-6301c6c0194b017120d5" style="width:100%;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-6301c6c0194b017120d5">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addPolylines","args":[[[[{"lng":[175.1083984375,175.108032226562,175.107620239258,175.107681274414,175.107711791992,175.107711791992,175.107711791992,175.107696533203,175.107177734375,175.107116699219,175.107070922852,175.107040405273,175.106994628906,175.106781005859,175.106735229492,175.106674194336,175.10661315918,175.106582641602,175.106536865234,175.106521606445,175.106491088867,175.106460571289,175.106002807617,175.105880737305,175.105758666992,175.105590820312,175.104873657227,175.104675292969,175.104598999023,175.104553222656,175.104522705078,175.104476928711,175.104431152344,175.104339599609,175.104202270508,175.104141235352,175.104080200195,175.103591918945,175.103530883789,175.103515625,175.103500366211,175.103469848633,175.103469848633,175.103469848633,175.103469848633,175.103469848633,175.103500366211,175.103561401367,175.103561401367,175.103561401367,175.103530883789,175.103515625,175.103469848633,175.103439331055,175.103393554688,175.103302001953,175.103149414062,175.103088378906,175.103057861328,175.103042602539,175.103012084961,175.103012084961,175.103012084961,175.103042602539,175.103042602539,175.103012084961,175.102996826172,175.102951049805,175.102890014648,175.101837158203,175.101348876953,175.101272583008,175.10124206543,175.101196289062,175.101150512695,175.101119995117,175.10107421875,175.101028442383,175.100997924805,175.100936889648,175.100280761719,175.099716186523,175.098861694336,175.098754882812,175.098678588867,175.0986328125,175.098556518555,175.098434448242,175.098129272461,175.097991943359,175.097961425781,175.097915649414,175.097869873047,175.097793579102,175.097793579102,175.097763061523,175.097732543945,175.097717285156,175.097671508789,175.09765625,175.097595214844,175.097549438477,175.097518920898,175.097457885742,175.097396850586,175.097320556641,175.097229003906,175.097137451172,175.097076416016,175.096954345703,175.096817016602,175.096755981445,175.096633911133,175.096557617188,175.096435546875,175.096252441406,175.096069335938,175.096038818359,175.09587097168,175.095718383789,175.095642089844,175.095520019531,175.095428466797,175.095352172852,175.094909667969,175.094696044922,175.094482421875,175.094299316406,175.09375,175.093414306641,175.093032836914,175.092651367188,175.092468261719,175.092132568359,175.091720581055,175.09162902832,175.091598510742,175.091094970703,175.090637207031,175.090148925781,175.089721679688,175.089340209961,175.088958740234,175.088882446289,175.088195800781,175.087371826172,175.086669921875,175.085830688477,175.085113525391,175.084320068359,175.083770751953,175.083435058594,175.082916259766,175.08251953125,175.082077026367,175.081619262695,175.081573486328,175.081481933594,175.081359863281,175.080276489258,175.079650878906,175.079193115234,175.078231811523,175.077438354492,175.076553344727,175.076080322266,175.07551574707,175.074920654297,175.074554443359,175.074172973633,175.073791503906,175.073348999023,175.073028564453,175.072738647461,175.071716308594,175.071395874023,175.071151733398,175.070938110352,175.070617675781,175.070281982422,175.06999206543,175.069732666016,175.067016601562,175.065582275391,175.065460205078,175.065216064453,175.064971923828,175.064514160156,175.06413269043,175.063674926758,175.063034057617,175.061782836914,175.061660766602,175.061157226562,175.056915283203,175.055938720703,175.055435180664,175.054916381836,175.054473876953,175.054000854492,175.053588867188,175.05322265625,175.052841186523,175.052429199219,175.051879882812,175.05143737793,175.050994873047,175.050521850586,175.050048828125,175.049194335938,175.048828125,175.048278808594,175.04801940918,175.047760009766,175.047439575195,175.047119140625,175.046920776367,175.046310424805,175.045989990234,175.045318603516,175.04524230957,175.044876098633,175.04460144043,175.044342041016,175.043991088867,175.043151855469,175.042282104492,175.041412353516,175.040878295898,175.040557861328,175.040298461914,175.040130615234,175.039978027344,175.039810180664,175.039642333984,175.039459228516,175.039260864258,175.039031982422,175.038848876953,175.03874206543,175.038589477539,175.038436889648,175.038269042969,175.038192749023,175.038070678711,175.037490844727,175.037338256836,175.037155151367,175.037002563477,175.036834716797,175.036697387695,175.036560058594,175.036437988281,175.036270141602,175.036148071289,175.036010742188,175.035858154297,175.035720825195,175.035552978516,175.035400390625,175.035202026367,175.034790039062,175.03466796875,175.034255981445,175.033996582031,175.033828735352,175.033157348633,175.031753540039,175.030578613281,175.029541015625,175.029067993164,175.028701782227,175.028213500977,175.027481079102,175.027236938477,175.026870727539,175.026321411133,175.025833129883,175.025192260742,175.023910522461,175.022842407227,175.021881103516,175.021011352539,175.020309448242,175.020034790039,175.019577026367,175.019317626953,175.019012451172,175.018676757812,175.018310546875,175.017837524414,175.017242431641,175.01692199707,175.01643371582,175.015960693359,175.015594482422,175.014801025391,175.014099121094,175.013534545898,175.013076782227,175.012451171875,175.011917114258,175.01123046875,175.010879516602,175.010498046875,175.009918212891,175.009429931641,175.009033203125,175.008239746094,175.007797241211,175.007308959961,175.006958007812,175.006195068359,175.005599975586,175.004791259766,175.004333496094,175.003982543945,175.003479003906,175.002914428711,175.002456665039,175.001922607422,175.001434326172,175.000717163086,174.99983215332,174.99919128418,174.998840332031,174.998519897461,174.998199462891,174.997909545898,174.997634887695,174.99739074707,174.996994018555,174.996490478516,174.996353149414,174.995788574219,174.995315551758,174.994720458984,174.99430847168,174.993988037109,174.993530273438,174.993118286133,174.992813110352,174.992492675781,174.992218017578,174.991119384766,174.989959716797,174.989593505859,174.989242553711,174.988830566406,174.988433837891,174.988021850586,174.98779296875,174.987396240234,174.986679077148,174.986602783203,174.986511230469,174.986434936523,174.986358642578,174.986282348633,174.986190795898,174.986114501953,174.986038208008,174.985961914062,174.985870361328,174.985794067383,174.985717773438,174.985656738281,174.985595703125,174.985534667969,174.985473632812,174.985397338867,174.985336303711,174.985275268555,174.984680175781,174.984619140625,174.984558105469,174.984497070312,174.984436035156,174.984359741211,174.984298706055,174.984237670898,174.984176635742,174.984115600586,174.984039306641,174.983963012695,174.983871459961,174.983795166016,174.98371887207,174.983642578125,174.983551025391,174.983474731445,174.9833984375,174.983322143555,174.98323059082,174.983154296875,174.98307800293,174.983001708984,174.98291015625,174.982833862305,174.982757568359,174.982681274414,174.98258972168,174.982513427734,174.982437133789,174.982360839844,174.982269287109,174.978393554688,174.977249145508,174.977157592773,174.97705078125,174.976959228516,174.976852416992,174.976760864258,174.976654052734,174.9765625,174.976455688477,174.976348876953,174.976257324219,174.976150512695,174.976028442383,174.975936889648,174.975830078125,174.975738525391,174.975631713867,174.975540161133,174.975433349609,174.975311279297,174.975219726562,174.975112915039,174.973693847656,174.973602294922,174.973480224609,174.973358154297,174.973236083984,174.973114013672,174.973022460938,174.972915649414,174.972793579102,174.972702026367,174.972595214844,174.97248840332,174.972396850586,174.972290039062,174.972198486328,174.972076416016,174.971969604492,174.971878051758,174.971771240234,174.9716796875,174.971572875977,174.971481323242,174.971374511719,174.971282958984,174.971176147461,174.971069335938,174.970993041992,174.970901489258,174.970794677734,174.970703125,174.970596313477,174.970520019531,174.970413208008,174.970321655273,174.970230102539,174.970153808594,174.970077514648,174.970001220703,174.969909667969,174.969833374023,174.969757080078,174.969680786133,174.969589233398,174.969512939453,174.969436645508,174.969360351562,174.969268798828,174.969192504883,174.969116210938,174.969039916992,174.968948364258,174.968872070312,174.968795776367,174.968719482422,174.968643188477,174.968551635742,174.968475341797,174.968399047852,174.968322753906,174.967437744141,174.967361450195,174.967269897461,174.967193603516,174.96711730957,174.967041015625,174.966949462891,174.966873168945,174.966796875,174.966720581055,174.96662902832,174.966552734375,174.96647644043,174.966400146484,174.96630859375,174.966232299805,174.966156005859,174.966079711914,174.96598815918,174.965911865234,174.965835571289,174.965759277344,174.965682983398,174.965591430664,174.964202880859,174.964111328125,174.96403503418,174.963958740234,174.963882446289,174.963790893555,174.963714599609,174.963638305664,174.963562011719,174.963470458984,174.963394165039,174.963317871094,174.963241577148,174.963150024414,174.963073730469,174.962997436523,174.961029052734,174.960357666016,174.95964050293,174.958831787109,174.958129882812,174.957458496094,174.956512451172,174.956069946289,174.955596923828,174.955108642578,174.954620361328,174.953735351562,174.952911376953,174.952453613281,174.951950073242,174.951309204102,174.95051574707,174.950149536133,174.949798583984,174.94953918457,174.949279785156,174.949035644531,174.948883056641,174.94856262207,174.948272705078,174.947692871094,174.947036743164,174.945922851562,174.945251464844,174.944793701172,174.944396972656,174.943908691406,174.943237304688,174.942153930664,174.941040039062,174.9404296875,174.940155029297,174.939880371094,174.939590454102,174.938812255859,174.937911987305,174.936279296875,174.934555053711,174.933792114258,174.933242797852,174.932357788086,174.931518554688,174.931060791016,174.930480957031,174.930114746094,174.930053710938,174.929977416992,174.929672241211,174.929122924805,174.92903137207,174.928619384766,174.928115844727,174.927871704102,174.927642822266,174.926956176758,174.926483154297,174.925521850586,174.924468994141,174.923370361328,174.922515869141,174.92219543457,174.921340942383,174.921310424805,174.921173095703,174.920455932617,174.919036865234,174.917877197266,174.91748046875,174.917114257812,174.916717529297,174.916000366211,174.915420532227,174.914993286133,174.914672851562,174.914154052734,174.913711547852,174.913482666016,174.913131713867,174.912521362305,174.911712646484,174.910400390625,174.908920288086,174.908737182617,174.908554077148,174.908355712891,174.907592773438,174.907562255859,174.907470703125,174.907409667969,174.907150268555,174.906814575195,174.906600952148,174.90641784668,174.906341552734,174.90625,174.906158447266,174.90592956543,174.9052734375,174.904434204102,174.902618408203,174.901748657227,174.901412963867,174.901153564453,174.900268554688,174.899856567383,174.899398803711,174.898559570312,174.897918701172,174.897308349609,174.896789550781,174.896133422852,174.895721435547,174.89421081543,174.892959594727,174.892318725586,174.89192199707,174.891510009766,174.890960693359,174.890594482422,174.890182495117,174.889633178711,174.888748168945,174.888320922852,174.887420654297,174.886779785156,174.886428833008,174.885818481445,174.885391235352,174.885192871094,174.884872436523,174.884399414062,174.88395690918,174.883499145508,174.88313293457,174.882858276367,174.882522583008,174.882202148438,174.881759643555,174.881454467773,174.881118774414,174.880477905273,174.879959106445,174.879760742188,174.879272460938,174.878921508789,174.878158569336,174.87712097168,174.875671386719,174.874954223633,174.874252319336,174.872756958008,174.872192382812,174.871841430664,174.871398925781,174.870559692383,174.870040893555,174.869552612305,174.869094848633,174.868270874023,174.867431640625,174.866119384766,174.864593505859,174.863998413086,174.863662719727,174.863357543945,174.863052368164,174.862762451172,174.86247253418,174.862228393555,174.861877441406,174.861557006836,174.861312866211,174.861190795898,174.861068725586,174.861038208008,174.860870361328,174.860717773438,174.860549926758,174.860443115234,174.860122680664,174.859939575195,174.859817504883,174.859680175781,174.859558105469,174.859436035156,174.859313964844,174.859161376953,174.858963012695,174.858642578125,174.858154296875,174.855972290039,174.854553222656,174.853073120117,174.852600097656,174.852111816406,174.851272583008,174.850921630859,174.850555419922,174.850158691406,174.849761962891,174.84895324707,174.846588134766,174.844909667969,174.844390869141,174.844055175781,174.843719482422,174.843276977539,174.842910766602,174.842590332031,174.842315673828,174.841659545898,174.841430664062,174.841201782227,174.840789794922,174.840454101562,174.839981079102,174.838958740234,174.838470458984,174.838119506836,174.837738037109,174.83740234375,174.837188720703,174.836990356445,174.835601806641,174.834701538086,174.833633422852,174.831237792969,174.828155517578,174.826599121094,174.824920654297,174.822875976562,174.821853637695,174.820831298828,174.820281982422,174.819534301758,174.819030761719,174.818435668945,174.81787109375,174.817199707031,174.816513061523,174.816101074219,174.81575012207,174.815399169922,174.815078735352,174.81462097168,174.814239501953,174.81379699707,174.81330871582,174.812789916992,174.811889648438,174.811157226562,174.809051513672,174.808471679688,174.808074951172,174.807708740234,174.807388305664,174.807159423828,174.806915283203,174.806594848633,174.806259155273,174.805938720703,174.805679321289,174.805191040039,174.804748535156,174.804428100586,174.804092407227,174.803329467773,174.802841186523,174.802230834961,174.801696777344,174.80094909668,174.800201416016,174.799514770508,174.798828125,174.79801940918,174.796798706055,174.796401977539,174.795913696289,174.795440673828,174.794769287109,174.793930053711,174.793395996094,174.793060302734,174.792739868164,174.792388916016,174.792114257812,174.791717529297,174.791442871094,174.791229248047,174.791000366211,174.790756225586,174.790420532227,174.790069580078,174.789474487305,174.789001464844,174.788681030273,174.788360595703,174.788238525391,174.788101196289,174.787857055664,174.787628173828,174.786956787109,174.786117553711,174.785842895508,174.783996582031,174.783676147461,174.783233642578,174.782791137695,174.781234741211,174.780990600586,174.780670166016,174.780471801758,174.778793334961,174.778549194336,174.778457641602,174.778396606445,174.778350830078,174.778350830078,174.778350830078,174.778442382812,174.778549194336,174.778594970703,174.778839111328,174.778961181641,174.779220581055,174.779312133789,174.779479980469,174.779495239258,174.779632568359,174.779708862305,174.779800415039,174.779830932617,174.780075073242,174.780868530273,174.781280517578,174.781311035156,174.781356811523,174.781402587891,174.78141784668,174.781433105469,174.781433105469,174.781433105469],"lat":[-41.1068801879883,-41.1067390441895,-41.1064987182617,-41.1064186096191,-41.1063499450684,-41.1062698364258,-41.1061897277832,-41.1061172485352,-41.1055488586426,-41.1054992675781,-41.1055183410645,-41.1055297851562,-41.1055374145508,-41.1056480407715,-41.1056671142578,-41.1056900024414,-41.1056900024414,-41.1057090759277,-41.1057281494141,-41.1057586669922,-41.1057891845703,-41.1058197021484,-41.1060600280762,-41.1061172485352,-41.1061706542969,-41.1062088012695,-41.106388092041,-41.1064491271973,-41.1064682006836,-41.1064682006836,-41.1064796447754,-41.1065101623535,-41.1065406799316,-41.1066207885742,-41.1067199707031,-41.1067771911621,-41.1068496704102,-41.1074676513672,-41.1075592041016,-41.1076278686523,-41.1076698303223,-41.1077079772949,-41.1077575683594,-41.1078186035156,-41.1078872680664,-41.107967376709,-41.1080780029297,-41.1083488464355,-41.1084403991699,-41.108528137207,-41.1086082458496,-41.1086692810059,-41.1087379455566,-41.1087799072266,-41.1088371276855,-41.1089172363281,-41.1090087890625,-41.109058380127,-41.1091079711914,-41.1091690063477,-41.1092376708984,-41.1092987060547,-41.1093597412109,-41.109489440918,-41.1095390319824,-41.1095886230469,-41.1096382141113,-41.1096801757812,-41.1097297668457,-41.1104393005371,-41.110767364502,-41.1108207702637,-41.11083984375,-41.1108474731445,-41.1108474731445,-41.1108474731445,-41.11083984375,-41.11083984375,-41.1108207702637,-41.110767364502,-41.1102600097656,-41.1098098754883,-41.1091499328613,-41.1090774536133,-41.1090278625488,-41.1089973449707,-41.1089706420898,-41.1089286804199,-41.1088371276855,-41.1088485717773,-41.1088600158691,-41.1088676452637,-41.1088905334473,-41.1089401245117,-41.1089897155762,-41.1090507507324,-41.1092491149902,-41.1093788146973,-41.109489440918,-41.1096496582031,-41.110179901123,-41.1104507446289,-41.1106300354004,-41.1107978820801,-41.1109199523926,-41.1110801696777,-41.1112098693848,-41.1113471984863,-41.1114196777344,-41.1115303039551,-41.1116485595703,-41.1117095947266,-41.1117897033691,-41.1118392944336,-41.1119079589844,-41.1120185852051,-41.1121101379395,-41.1121978759766,-41.1122703552246,-41.1123504638672,-41.1124000549316,-41.1124496459961,-41.1124877929688,-41.1125297546387,-41.1127281188965,-41.1128196716309,-41.112907409668,-41.1129379272461,-41.113109588623,-41.1132392883301,-41.1133499145508,-41.1134300231934,-41.1134796142578,-41.1135177612305,-41.1135673522949,-41.1135787963867,-41.1135902404785,-41.1136474609375,-41.1137008666992,-41.11376953125,-41.1138305664062,-41.1138801574707,-41.1139373779297,-41.1139488220215,-41.1140594482422,-41.1142082214355,-41.1143379211426,-41.1144905090332,-41.1146278381348,-41.1147804260254,-41.1148796081543,-41.1149673461914,-41.1150703430176,-41.1151504516602,-41.1152191162109,-41.1152687072754,-41.1152801513672,-41.1152992248535,-41.1153297424316,-41.1154479980469,-41.1155204772949,-41.1155204772949,-41.1156005859375,-41.1156692504883,-41.1157493591309,-41.1157989501953,-41.115837097168,-41.1158905029297,-41.115909576416,-41.1159286499023,-41.1159400939941,-41.1159400939941,-41.1159400939941,-41.1159172058105,-41.1158676147461,-41.1158599853516,-41.1158599853516,-41.1158599853516,-41.1158676147461,-41.1158905029297,-41.115909576416,-41.1159591674805,-41.1161193847656,-41.1161994934082,-41.1161994934082,-41.1162071228027,-41.1162300109863,-41.1162376403809,-41.1162376403809,-41.1162300109863,-41.1162071228027,-41.1161689758301,-41.1161308288574,-41.1161308288574,-41.1161003112793,-41.1161003112793,-41.1161003112793,-41.1161079406738,-41.1161308288574,-41.1161575317383,-41.1161880493164,-41.1162300109863,-41.116268157959,-41.1163291931152,-41.1164207458496,-41.1165008544922,-41.1165771484375,-41.1166801452637,-41.1167907714844,-41.1170272827148,-41.1171875,-41.1173896789551,-41.1174774169922,-41.1175689697266,-41.1177101135254,-41.1178588867188,-41.1179504394531,-41.1182479858398,-41.118408203125,-41.1187973022461,-41.1188583374023,-41.1190795898438,-41.119270324707,-41.1194381713867,-41.1196708679199,-41.1202583312988,-41.1208877563477,-41.1215286254883,-41.1219177246094,-41.1221694946289,-41.1223602294922,-41.1224708557129,-41.12255859375,-41.1226272583008,-41.1226997375488,-41.1227378845215,-41.1227874755859,-41.1228294372559,-41.1228370666504,-41.1228485107422,-41.1228485107422,-41.1228370666504,-41.1228179931641,-41.1227874755859,-41.1227684020996,-41.1227073669434,-41.1226997375488,-41.122688293457,-41.1226806640625,-41.1226806640625,-41.122688293457,-41.1226997375488,-41.1227188110352,-41.1227493286133,-41.1227798461914,-41.1228179931641,-41.1228675842285,-41.1229286193848,-41.1230087280273,-41.1231002807617,-41.123218536377,-41.1234703063965,-41.1235694885254,-41.1238174438477,-41.1239585876465,-41.1240386962891,-41.1243286132812,-41.124927520752,-41.1253700256348,-41.1257286071777,-41.1259078979492,-41.1260681152344,-41.126277923584,-41.1266593933105,-41.1267776489258,-41.1269683837891,-41.1273193359375,-41.1276397705078,-41.1281089782715,-41.1290473937988,-41.1298408508301,-41.1305198669434,-41.1311378479004,-41.1316604614258,-41.1318702697754,-41.1321907043457,-41.1323585510254,-41.1325492858887,-41.1327590942383,-41.1329689025879,-41.1332397460938,-41.1335487365723,-41.1336975097656,-41.1339073181152,-41.1341171264648,-41.1342697143555,-41.134578704834,-41.134880065918,-41.1351280212402,-41.1353492736816,-41.1356506347656,-41.1359100341797,-41.1362686157227,-41.1364707946777,-41.1366806030273,-41.1370277404785,-41.1373291015625,-41.1375770568848,-41.1380577087402,-41.1383171081543,-41.1385688781738,-41.1387672424316,-41.1391372680664,-41.1394195556641,-41.139778137207,-41.1399993896484,-41.1401786804199,-41.140438079834,-41.1407470703125,-41.1410179138184,-41.141357421875,-41.1416778564453,-41.1422004699707,-41.1428489685059,-41.1433792114258,-41.1436500549316,-41.1438789367676,-41.1440773010254,-41.1442680358887,-41.1444206237793,-41.1445274353027,-41.144718170166,-41.1449203491211,-41.1449699401855,-41.1451873779297,-41.1453704833984,-41.1455993652344,-41.1457290649414,-41.1458282470703,-41.1459579467773,-41.1460800170898,-41.1461906433105,-41.1463088989258,-41.1464195251465,-41.146900177002,-41.1474189758301,-41.147590637207,-41.1477584838867,-41.1479797363281,-41.1482200622559,-41.1484870910645,-41.1486473083496,-41.1489906311035,-41.1495780944824,-41.1496391296387,-41.1497077941895,-41.1497802734375,-41.1498374938965,-41.1499099731445,-41.1499786376953,-41.1500473022461,-41.1501197814941,-41.1501884460449,-41.1502685546875,-41.1503372192383,-41.1504096984863,-41.1504783630371,-41.1505584716797,-41.1506271362305,-41.150707244873,-41.1507873535156,-41.1508598327637,-41.1509399414062,-41.1517105102539,-41.1517906188965,-41.1518592834473,-41.1519393920898,-41.1520195007324,-41.1520881652832,-41.1521682739258,-41.1522407531738,-41.1523094177246,-41.1523895263672,-41.152458190918,-41.152530670166,-41.1525993347168,-41.1526679992676,-41.1527404785156,-41.1528091430664,-41.1528778076172,-41.1529502868652,-41.153018951416,-41.1530799865723,-41.153148651123,-41.1532173156738,-41.1532783508301,-41.1533393859863,-41.1534080505371,-41.1534690856934,-41.1535301208496,-41.1535987854004,-41.1536598205566,-41.1537208557129,-41.1537780761719,-41.1538276672363,-41.1538887023926,-41.1563606262207,-41.1570777893066,-41.1571388244629,-41.1571998596191,-41.1572494506836,-41.1573104858398,-41.1573677062988,-41.1574287414551,-41.1574783325195,-41.1575393676758,-41.1575889587402,-41.1576385498047,-41.1576881408691,-41.1577491760254,-41.1577987670898,-41.1578483581543,-41.1578979492188,-41.1579475402832,-41.1579895019531,-41.1580390930176,-41.158088684082,-41.158130645752,-41.1581802368164,-41.1587371826172,-41.1587905883789,-41.1588287353516,-41.158878326416,-41.1589202880859,-41.1589698791504,-41.1590194702148,-41.1590576171875,-41.159107208252,-41.1591606140137,-41.1592102050781,-41.1592597961426,-41.159309387207,-41.1593589782715,-41.1594200134277,-41.1594696044922,-41.1595191955566,-41.1595802307129,-41.1596298217773,-41.1596908569336,-41.159740447998,-41.159797668457,-41.1598587036133,-41.1599197387695,-41.159969329834,-41.1600303649902,-41.1600875854492,-41.1601486206055,-41.1602096557617,-41.160270690918,-41.1603393554688,-41.160400390625,-41.160457611084,-41.1605186462402,-41.160587310791,-41.1606483459473,-41.1607208251953,-41.1607780456543,-41.1608505249023,-41.1609191894531,-41.1609802246094,-41.1610488891602,-41.1611175537109,-41.161190032959,-41.1612586975098,-41.1613273620605,-41.1613998413086,-41.1614685058594,-41.1615371704102,-41.1616096496582,-41.161678314209,-41.161750793457,-41.1618270874023,-41.1618995666504,-41.161979675293,-41.1620483398438,-41.1621208190918,-41.1621971130371,-41.1622772216797,-41.1632194519043,-41.1632881164551,-41.1633682250977,-41.1634407043457,-41.1635093688965,-41.1635780334473,-41.1636505126953,-41.1637191772461,-41.1637802124023,-41.1638488769531,-41.1639175415039,-41.163990020752,-41.1640472412109,-41.164119720459,-41.1641883850098,-41.164249420166,-41.1643180847168,-41.164379119873,-41.1644401550293,-41.1645088195801,-41.1645698547363,-41.1646270751953,-41.1646881103516,-41.1647491455078,-41.1657104492188,-41.1657791137695,-41.1658401489258,-41.1658973693848,-41.165958404541,-41.1660194396973,-41.1660804748535,-41.1661491394043,-41.1662101745605,-41.1662673950195,-41.1663284301758,-41.1663970947266,-41.1664581298828,-41.1665191650391,-41.1665878295898,-41.1666488647461,-41.1682205200195,-41.1687507629395,-41.169319152832,-41.1699295043945,-41.1703872680664,-41.1707801818848,-41.171329498291,-41.1716079711914,-41.1719398498535,-41.1723175048828,-41.1727600097656,-41.1735076904297,-41.1742401123047,-41.1745986938477,-41.1749382019043,-41.1753387451172,-41.1757774353027,-41.1759872436523,-41.1762199401855,-41.1763877868652,-41.1765670776367,-41.1767501831055,-41.176887512207,-41.1771507263184,-41.177417755127,-41.1779899597168,-41.1786193847656,-41.1797103881836,-41.180347442627,-41.1807899475098,-41.1811485290527,-41.1815605163574,-41.1820602416992,-41.1827774047852,-41.1835289001465,-41.1839370727539,-41.1841087341309,-41.1842803955078,-41.184440612793,-41.1848602294922,-41.1853370666504,-41.1862106323242,-41.1871299743652,-41.1875381469727,-41.1878700256348,-41.1884078979492,-41.1889495849609,-41.1892471313477,-41.1896286010742,-41.1898880004883,-41.1899299621582,-41.1899795532227,-41.1901588439941,-41.1904678344727,-41.1905174255371,-41.1907386779785,-41.1910285949707,-41.1911697387695,-41.1913070678711,-41.1917304992676,-41.1920204162598,-41.1925888061523,-41.193187713623,-41.1937980651855,-41.194278717041,-41.194450378418,-41.1949195861816,-41.1949272155762,-41.1950187683105,-41.1954002380371,-41.1961479187012,-41.1967582702637,-41.1969795227051,-41.1971702575684,-41.1973991394043,-41.1978073120117,-41.1981506347656,-41.1983985900879,-41.1985778808594,-41.1988372802734,-41.1990776062012,-41.1991996765137,-41.199390411377,-41.1997184753418,-41.2001686096191,-41.200927734375,-41.2017784118652,-41.2018890380859,-41.2019691467285,-41.2020874023438,-41.2024879455566,-41.2025299072266,-41.2025680541992,-41.2025985717773,-41.2027282714844,-41.202880859375,-41.2029685974121,-41.2030487060547,-41.2030906677246,-41.2031288146973,-41.2031898498535,-41.2032775878906,-41.2035903930664,-41.203987121582,-41.2048683166504,-41.2052803039551,-41.2054481506348,-41.2056083679199,-41.2062072753906,-41.2064476013184,-41.2067184448242,-41.2071876525879,-41.2075271606445,-41.2078285217285,-41.2080993652344,-41.2084503173828,-41.2086486816406,-41.2093505859375,-41.2099571228027,-41.2102394104004,-41.21044921875,-41.2107200622559,-41.211067199707,-41.2113380432129,-41.2116508483887,-41.2120475769043,-41.2126884460449,-41.2129783630371,-41.2136383056641,-41.2140808105469,-41.2143173217773,-41.2146606445312,-41.2149200439453,-41.2150192260742,-41.2151794433594,-41.2154006958008,-41.2156105041504,-41.2158203125,-41.215950012207,-41.2160682678223,-41.2162094116211,-41.2163505554199,-41.2165603637695,-41.2167091369629,-41.2168579101562,-41.2171897888184,-41.2174377441406,-41.2175102233887,-41.2177276611328,-41.2178688049316,-41.2181587219238,-41.2185401916504,-41.2190704345703,-41.2193489074707,-41.2196273803711,-41.2203102111816,-41.2205772399902,-41.220760345459,-41.2209701538086,-41.2213401794434,-41.2215576171875,-41.2217597961426,-41.2219276428223,-41.2222290039062,-41.2225074768066,-41.2229499816895,-41.2234306335449,-41.2236289978027,-41.2237281799316,-41.2238006591797,-41.2238578796387,-41.2239074707031,-41.223949432373,-41.2239685058594,-41.2239875793457,-41.2239990234375,-41.2239875793457,-41.2239875793457,-41.2239799499512,-41.2239799499512,-41.2239685058594,-41.223949432373,-41.2239303588867,-41.2239074707031,-41.2238578796387,-41.2238273620605,-41.2238082885742,-41.2238006591797,-41.2238006591797,-41.2238082885742,-41.2238273620605,-41.2238693237305,-41.2239379882812,-41.2240371704102,-41.2241973876953,-41.2249298095703,-41.225399017334,-41.2258796691895,-41.2260398864746,-41.2262191772461,-41.2266502380371,-41.2268104553223,-41.2269477844238,-41.2270584106445,-41.2271690368652,-41.2273902893066,-41.2280006408691,-41.2284202575684,-41.2285575866699,-41.228687286377,-41.2288475036621,-41.2290802001953,-41.2293281555176,-41.2296104431152,-41.2299194335938,-41.230640411377,-41.2308502197266,-41.2310104370117,-41.231258392334,-41.2314376831055,-41.2316284179688,-41.2319488525391,-41.2320976257324,-41.232250213623,-41.2324371337891,-41.2326583862305,-41.2328186035156,-41.2329902648926,-41.2342796325684,-41.2349891662598,-41.2356986999512,-41.2371101379395,-41.2388687133789,-41.239990234375,-41.2409591674805,-41.2421188354492,-41.2426986694336,-41.2432479858398,-41.243579864502,-41.2439880371094,-41.2442779541016,-41.2446594238281,-41.2450370788574,-41.2455902099609,-41.2461090087891,-41.2464294433594,-41.2466888427734,-41.246940612793,-41.2471580505371,-41.2474479675293,-41.247688293457,-41.2479782104492,-41.2482681274414,-41.2486000061035,-41.2491188049316,-41.2495193481445,-41.2506675720215,-41.2509880065918,-41.2512092590332,-41.2514495849609,-41.2516708374023,-41.2518501281738,-41.252067565918,-41.2523498535156,-41.2526779174805,-41.2529487609863,-41.2531585693359,-41.2535095214844,-41.2537879943848,-41.2539596557617,-41.2541275024414,-41.2545204162598,-41.2547378540039,-41.2549591064453,-41.2551307678223,-41.2553176879883,-41.2555084228516,-41.2557106018066,-41.2559700012207,-41.2563095092773,-41.2568283081055,-41.257007598877,-41.2572402954102,-41.2574996948242,-41.2578773498535,-41.2584571838379,-41.2588806152344,-41.2591781616211,-41.2594871520996,-41.2598495483398,-41.2601470947266,-41.2605895996094,-41.2608680725098,-41.2610778808594,-41.2612800598145,-41.2614402770996,-41.2616500854492,-41.2618179321289,-41.2620887756348,-41.2623291015625,-41.2624893188477,-41.2626800537109,-41.2627601623535,-41.2628784179688,-41.2630805969238,-41.263298034668,-41.264030456543,-41.2649192810059,-41.2651977539062,-41.2668495178223,-41.267147064209,-41.2676086425781,-41.2680892944336,-41.2697982788086,-41.2700271606445,-41.2702789306641,-41.2704200744629,-41.2716674804688,-41.2718772888184,-41.2719879150391,-41.2721290588379,-41.2722473144531,-41.2723693847656,-41.2725105285645,-41.2727584838867,-41.2730484008789,-41.2731170654297,-41.2734870910645,-41.2737197875977,-41.2741508483887,-41.2742881774902,-41.2745475769043,-41.2745704650879,-41.274787902832,-41.2749176025391,-41.2750396728516,-41.2751274108887,-41.2755279541016,-41.2755508422852,-41.2755699157715,-41.2755699157715,-41.2755584716797,-41.2755508422852,-41.2755889892578,-41.2756195068359,-41.2756385803223,-41.2756385803223]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"#000000","weight":3,"opacity":1,"fill":false,"fillColor":"#000000","fillOpacity":0.2,"smoothFactor":1,"noClip":false},"28m 54.7s , 35.3kms",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMarkers","args":[-41.10678,175.10847,null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},"25 Edelweiss Grv, Timberlea, Upper Hutt 5018, New Zealand",null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMarkers","args":[-41.27568,174.78112,null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},"1 Pipitea St, Thorndon, Wellington 6011, New Zealand",null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-41.27568,-41.1054992675781],"lng":[174.778350830078,175.10847]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>It’s also relatively straight forward to use different base maps, and a nice demo of some other providers can be found <a href="http://leaflet-extras.github.io/leaflet-providers/preview/">here</a>. For example:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(leaflet)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">leaflet</span>(<span class="at">width=</span><span class="st">"100%"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addTiles</span>(</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">urlTemplate=</span><span class="st">'https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png'</span>,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">attribution =</span> <span class="fu">sprintf</span>(</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Map tiles by %s"</span>, </span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>      <span class="st">'&lt;a href="http://stamen.com"&gt;Stamen Design&lt;/a&gt;'</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addTiles</span>(</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">urlTemplate =</span> <span class="st">'https://stamen-tiles-{s}.a.ssl.fastly.net/toner-hybrid/{z}/{x}/{y}{r}.png'</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addPolylines</span>(</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">lng =</span> path<span class="sc">$</span>lon,</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">lat =</span> path<span class="sc">$</span>lat,</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">popup=</span>routelabel, </span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"#000000"</span>, </span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">opacity =</span> <span class="dv">1</span>, </span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">weight =</span> <span class="dv">3</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMarkers</span>(<span class="at">lng =</span> o<span class="sc">$</span>lng, <span class="at">lat =</span> o<span class="sc">$</span>lat, <span class="at">popup =</span> o<span class="sc">$</span>address) <span class="sc">%&gt;%</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMarkers</span>(<span class="at">lng =</span> d<span class="sc">$</span>lng, <span class="at">lat =</span> d<span class="sc">$</span>lat, <span class="at">popup =</span> d<span class="sc">$</span>address)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="htmlwidget-141b128f278a19178464" style="width:100%;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-141b128f278a19178464">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"Map tiles by <a href=\"http://stamen.com\">Stamen Design<\/a>"}]},{"method":"addTiles","args":["https://stamen-tiles-{s}.a.ssl.fastly.net/toner-hybrid/{z}/{x}/{y}{r}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false}]},{"method":"addPolylines","args":[[[[{"lng":[175.1083984375,175.108032226562,175.107620239258,175.107681274414,175.107711791992,175.107711791992,175.107711791992,175.107696533203,175.107177734375,175.107116699219,175.107070922852,175.107040405273,175.106994628906,175.106781005859,175.106735229492,175.106674194336,175.10661315918,175.106582641602,175.106536865234,175.106521606445,175.106491088867,175.106460571289,175.106002807617,175.105880737305,175.105758666992,175.105590820312,175.104873657227,175.104675292969,175.104598999023,175.104553222656,175.104522705078,175.104476928711,175.104431152344,175.104339599609,175.104202270508,175.104141235352,175.104080200195,175.103591918945,175.103530883789,175.103515625,175.103500366211,175.103469848633,175.103469848633,175.103469848633,175.103469848633,175.103469848633,175.103500366211,175.103561401367,175.103561401367,175.103561401367,175.103530883789,175.103515625,175.103469848633,175.103439331055,175.103393554688,175.103302001953,175.103149414062,175.103088378906,175.103057861328,175.103042602539,175.103012084961,175.103012084961,175.103012084961,175.103042602539,175.103042602539,175.103012084961,175.102996826172,175.102951049805,175.102890014648,175.101837158203,175.101348876953,175.101272583008,175.10124206543,175.101196289062,175.101150512695,175.101119995117,175.10107421875,175.101028442383,175.100997924805,175.100936889648,175.100280761719,175.099716186523,175.098861694336,175.098754882812,175.098678588867,175.0986328125,175.098556518555,175.098434448242,175.098129272461,175.097991943359,175.097961425781,175.097915649414,175.097869873047,175.097793579102,175.097793579102,175.097763061523,175.097732543945,175.097717285156,175.097671508789,175.09765625,175.097595214844,175.097549438477,175.097518920898,175.097457885742,175.097396850586,175.097320556641,175.097229003906,175.097137451172,175.097076416016,175.096954345703,175.096817016602,175.096755981445,175.096633911133,175.096557617188,175.096435546875,175.096252441406,175.096069335938,175.096038818359,175.09587097168,175.095718383789,175.095642089844,175.095520019531,175.095428466797,175.095352172852,175.094909667969,175.094696044922,175.094482421875,175.094299316406,175.09375,175.093414306641,175.093032836914,175.092651367188,175.092468261719,175.092132568359,175.091720581055,175.09162902832,175.091598510742,175.091094970703,175.090637207031,175.090148925781,175.089721679688,175.089340209961,175.088958740234,175.088882446289,175.088195800781,175.087371826172,175.086669921875,175.085830688477,175.085113525391,175.084320068359,175.083770751953,175.083435058594,175.082916259766,175.08251953125,175.082077026367,175.081619262695,175.081573486328,175.081481933594,175.081359863281,175.080276489258,175.079650878906,175.079193115234,175.078231811523,175.077438354492,175.076553344727,175.076080322266,175.07551574707,175.074920654297,175.074554443359,175.074172973633,175.073791503906,175.073348999023,175.073028564453,175.072738647461,175.071716308594,175.071395874023,175.071151733398,175.070938110352,175.070617675781,175.070281982422,175.06999206543,175.069732666016,175.067016601562,175.065582275391,175.065460205078,175.065216064453,175.064971923828,175.064514160156,175.06413269043,175.063674926758,175.063034057617,175.061782836914,175.061660766602,175.061157226562,175.056915283203,175.055938720703,175.055435180664,175.054916381836,175.054473876953,175.054000854492,175.053588867188,175.05322265625,175.052841186523,175.052429199219,175.051879882812,175.05143737793,175.050994873047,175.050521850586,175.050048828125,175.049194335938,175.048828125,175.048278808594,175.04801940918,175.047760009766,175.047439575195,175.047119140625,175.046920776367,175.046310424805,175.045989990234,175.045318603516,175.04524230957,175.044876098633,175.04460144043,175.044342041016,175.043991088867,175.043151855469,175.042282104492,175.041412353516,175.040878295898,175.040557861328,175.040298461914,175.040130615234,175.039978027344,175.039810180664,175.039642333984,175.039459228516,175.039260864258,175.039031982422,175.038848876953,175.03874206543,175.038589477539,175.038436889648,175.038269042969,175.038192749023,175.038070678711,175.037490844727,175.037338256836,175.037155151367,175.037002563477,175.036834716797,175.036697387695,175.036560058594,175.036437988281,175.036270141602,175.036148071289,175.036010742188,175.035858154297,175.035720825195,175.035552978516,175.035400390625,175.035202026367,175.034790039062,175.03466796875,175.034255981445,175.033996582031,175.033828735352,175.033157348633,175.031753540039,175.030578613281,175.029541015625,175.029067993164,175.028701782227,175.028213500977,175.027481079102,175.027236938477,175.026870727539,175.026321411133,175.025833129883,175.025192260742,175.023910522461,175.022842407227,175.021881103516,175.021011352539,175.020309448242,175.020034790039,175.019577026367,175.019317626953,175.019012451172,175.018676757812,175.018310546875,175.017837524414,175.017242431641,175.01692199707,175.01643371582,175.015960693359,175.015594482422,175.014801025391,175.014099121094,175.013534545898,175.013076782227,175.012451171875,175.011917114258,175.01123046875,175.010879516602,175.010498046875,175.009918212891,175.009429931641,175.009033203125,175.008239746094,175.007797241211,175.007308959961,175.006958007812,175.006195068359,175.005599975586,175.004791259766,175.004333496094,175.003982543945,175.003479003906,175.002914428711,175.002456665039,175.001922607422,175.001434326172,175.000717163086,174.99983215332,174.99919128418,174.998840332031,174.998519897461,174.998199462891,174.997909545898,174.997634887695,174.99739074707,174.996994018555,174.996490478516,174.996353149414,174.995788574219,174.995315551758,174.994720458984,174.99430847168,174.993988037109,174.993530273438,174.993118286133,174.992813110352,174.992492675781,174.992218017578,174.991119384766,174.989959716797,174.989593505859,174.989242553711,174.988830566406,174.988433837891,174.988021850586,174.98779296875,174.987396240234,174.986679077148,174.986602783203,174.986511230469,174.986434936523,174.986358642578,174.986282348633,174.986190795898,174.986114501953,174.986038208008,174.985961914062,174.985870361328,174.985794067383,174.985717773438,174.985656738281,174.985595703125,174.985534667969,174.985473632812,174.985397338867,174.985336303711,174.985275268555,174.984680175781,174.984619140625,174.984558105469,174.984497070312,174.984436035156,174.984359741211,174.984298706055,174.984237670898,174.984176635742,174.984115600586,174.984039306641,174.983963012695,174.983871459961,174.983795166016,174.98371887207,174.983642578125,174.983551025391,174.983474731445,174.9833984375,174.983322143555,174.98323059082,174.983154296875,174.98307800293,174.983001708984,174.98291015625,174.982833862305,174.982757568359,174.982681274414,174.98258972168,174.982513427734,174.982437133789,174.982360839844,174.982269287109,174.978393554688,174.977249145508,174.977157592773,174.97705078125,174.976959228516,174.976852416992,174.976760864258,174.976654052734,174.9765625,174.976455688477,174.976348876953,174.976257324219,174.976150512695,174.976028442383,174.975936889648,174.975830078125,174.975738525391,174.975631713867,174.975540161133,174.975433349609,174.975311279297,174.975219726562,174.975112915039,174.973693847656,174.973602294922,174.973480224609,174.973358154297,174.973236083984,174.973114013672,174.973022460938,174.972915649414,174.972793579102,174.972702026367,174.972595214844,174.97248840332,174.972396850586,174.972290039062,174.972198486328,174.972076416016,174.971969604492,174.971878051758,174.971771240234,174.9716796875,174.971572875977,174.971481323242,174.971374511719,174.971282958984,174.971176147461,174.971069335938,174.970993041992,174.970901489258,174.970794677734,174.970703125,174.970596313477,174.970520019531,174.970413208008,174.970321655273,174.970230102539,174.970153808594,174.970077514648,174.970001220703,174.969909667969,174.969833374023,174.969757080078,174.969680786133,174.969589233398,174.969512939453,174.969436645508,174.969360351562,174.969268798828,174.969192504883,174.969116210938,174.969039916992,174.968948364258,174.968872070312,174.968795776367,174.968719482422,174.968643188477,174.968551635742,174.968475341797,174.968399047852,174.968322753906,174.967437744141,174.967361450195,174.967269897461,174.967193603516,174.96711730957,174.967041015625,174.966949462891,174.966873168945,174.966796875,174.966720581055,174.96662902832,174.966552734375,174.96647644043,174.966400146484,174.96630859375,174.966232299805,174.966156005859,174.966079711914,174.96598815918,174.965911865234,174.965835571289,174.965759277344,174.965682983398,174.965591430664,174.964202880859,174.964111328125,174.96403503418,174.963958740234,174.963882446289,174.963790893555,174.963714599609,174.963638305664,174.963562011719,174.963470458984,174.963394165039,174.963317871094,174.963241577148,174.963150024414,174.963073730469,174.962997436523,174.961029052734,174.960357666016,174.95964050293,174.958831787109,174.958129882812,174.957458496094,174.956512451172,174.956069946289,174.955596923828,174.955108642578,174.954620361328,174.953735351562,174.952911376953,174.952453613281,174.951950073242,174.951309204102,174.95051574707,174.950149536133,174.949798583984,174.94953918457,174.949279785156,174.949035644531,174.948883056641,174.94856262207,174.948272705078,174.947692871094,174.947036743164,174.945922851562,174.945251464844,174.944793701172,174.944396972656,174.943908691406,174.943237304688,174.942153930664,174.941040039062,174.9404296875,174.940155029297,174.939880371094,174.939590454102,174.938812255859,174.937911987305,174.936279296875,174.934555053711,174.933792114258,174.933242797852,174.932357788086,174.931518554688,174.931060791016,174.930480957031,174.930114746094,174.930053710938,174.929977416992,174.929672241211,174.929122924805,174.92903137207,174.928619384766,174.928115844727,174.927871704102,174.927642822266,174.926956176758,174.926483154297,174.925521850586,174.924468994141,174.923370361328,174.922515869141,174.92219543457,174.921340942383,174.921310424805,174.921173095703,174.920455932617,174.919036865234,174.917877197266,174.91748046875,174.917114257812,174.916717529297,174.916000366211,174.915420532227,174.914993286133,174.914672851562,174.914154052734,174.913711547852,174.913482666016,174.913131713867,174.912521362305,174.911712646484,174.910400390625,174.908920288086,174.908737182617,174.908554077148,174.908355712891,174.907592773438,174.907562255859,174.907470703125,174.907409667969,174.907150268555,174.906814575195,174.906600952148,174.90641784668,174.906341552734,174.90625,174.906158447266,174.90592956543,174.9052734375,174.904434204102,174.902618408203,174.901748657227,174.901412963867,174.901153564453,174.900268554688,174.899856567383,174.899398803711,174.898559570312,174.897918701172,174.897308349609,174.896789550781,174.896133422852,174.895721435547,174.89421081543,174.892959594727,174.892318725586,174.89192199707,174.891510009766,174.890960693359,174.890594482422,174.890182495117,174.889633178711,174.888748168945,174.888320922852,174.887420654297,174.886779785156,174.886428833008,174.885818481445,174.885391235352,174.885192871094,174.884872436523,174.884399414062,174.88395690918,174.883499145508,174.88313293457,174.882858276367,174.882522583008,174.882202148438,174.881759643555,174.881454467773,174.881118774414,174.880477905273,174.879959106445,174.879760742188,174.879272460938,174.878921508789,174.878158569336,174.87712097168,174.875671386719,174.874954223633,174.874252319336,174.872756958008,174.872192382812,174.871841430664,174.871398925781,174.870559692383,174.870040893555,174.869552612305,174.869094848633,174.868270874023,174.867431640625,174.866119384766,174.864593505859,174.863998413086,174.863662719727,174.863357543945,174.863052368164,174.862762451172,174.86247253418,174.862228393555,174.861877441406,174.861557006836,174.861312866211,174.861190795898,174.861068725586,174.861038208008,174.860870361328,174.860717773438,174.860549926758,174.860443115234,174.860122680664,174.859939575195,174.859817504883,174.859680175781,174.859558105469,174.859436035156,174.859313964844,174.859161376953,174.858963012695,174.858642578125,174.858154296875,174.855972290039,174.854553222656,174.853073120117,174.852600097656,174.852111816406,174.851272583008,174.850921630859,174.850555419922,174.850158691406,174.849761962891,174.84895324707,174.846588134766,174.844909667969,174.844390869141,174.844055175781,174.843719482422,174.843276977539,174.842910766602,174.842590332031,174.842315673828,174.841659545898,174.841430664062,174.841201782227,174.840789794922,174.840454101562,174.839981079102,174.838958740234,174.838470458984,174.838119506836,174.837738037109,174.83740234375,174.837188720703,174.836990356445,174.835601806641,174.834701538086,174.833633422852,174.831237792969,174.828155517578,174.826599121094,174.824920654297,174.822875976562,174.821853637695,174.820831298828,174.820281982422,174.819534301758,174.819030761719,174.818435668945,174.81787109375,174.817199707031,174.816513061523,174.816101074219,174.81575012207,174.815399169922,174.815078735352,174.81462097168,174.814239501953,174.81379699707,174.81330871582,174.812789916992,174.811889648438,174.811157226562,174.809051513672,174.808471679688,174.808074951172,174.807708740234,174.807388305664,174.807159423828,174.806915283203,174.806594848633,174.806259155273,174.805938720703,174.805679321289,174.805191040039,174.804748535156,174.804428100586,174.804092407227,174.803329467773,174.802841186523,174.802230834961,174.801696777344,174.80094909668,174.800201416016,174.799514770508,174.798828125,174.79801940918,174.796798706055,174.796401977539,174.795913696289,174.795440673828,174.794769287109,174.793930053711,174.793395996094,174.793060302734,174.792739868164,174.792388916016,174.792114257812,174.791717529297,174.791442871094,174.791229248047,174.791000366211,174.790756225586,174.790420532227,174.790069580078,174.789474487305,174.789001464844,174.788681030273,174.788360595703,174.788238525391,174.788101196289,174.787857055664,174.787628173828,174.786956787109,174.786117553711,174.785842895508,174.783996582031,174.783676147461,174.783233642578,174.782791137695,174.781234741211,174.780990600586,174.780670166016,174.780471801758,174.778793334961,174.778549194336,174.778457641602,174.778396606445,174.778350830078,174.778350830078,174.778350830078,174.778442382812,174.778549194336,174.778594970703,174.778839111328,174.778961181641,174.779220581055,174.779312133789,174.779479980469,174.779495239258,174.779632568359,174.779708862305,174.779800415039,174.779830932617,174.780075073242,174.780868530273,174.781280517578,174.781311035156,174.781356811523,174.781402587891,174.78141784668,174.781433105469,174.781433105469,174.781433105469],"lat":[-41.1068801879883,-41.1067390441895,-41.1064987182617,-41.1064186096191,-41.1063499450684,-41.1062698364258,-41.1061897277832,-41.1061172485352,-41.1055488586426,-41.1054992675781,-41.1055183410645,-41.1055297851562,-41.1055374145508,-41.1056480407715,-41.1056671142578,-41.1056900024414,-41.1056900024414,-41.1057090759277,-41.1057281494141,-41.1057586669922,-41.1057891845703,-41.1058197021484,-41.1060600280762,-41.1061172485352,-41.1061706542969,-41.1062088012695,-41.106388092041,-41.1064491271973,-41.1064682006836,-41.1064682006836,-41.1064796447754,-41.1065101623535,-41.1065406799316,-41.1066207885742,-41.1067199707031,-41.1067771911621,-41.1068496704102,-41.1074676513672,-41.1075592041016,-41.1076278686523,-41.1076698303223,-41.1077079772949,-41.1077575683594,-41.1078186035156,-41.1078872680664,-41.107967376709,-41.1080780029297,-41.1083488464355,-41.1084403991699,-41.108528137207,-41.1086082458496,-41.1086692810059,-41.1087379455566,-41.1087799072266,-41.1088371276855,-41.1089172363281,-41.1090087890625,-41.109058380127,-41.1091079711914,-41.1091690063477,-41.1092376708984,-41.1092987060547,-41.1093597412109,-41.109489440918,-41.1095390319824,-41.1095886230469,-41.1096382141113,-41.1096801757812,-41.1097297668457,-41.1104393005371,-41.110767364502,-41.1108207702637,-41.11083984375,-41.1108474731445,-41.1108474731445,-41.1108474731445,-41.11083984375,-41.11083984375,-41.1108207702637,-41.110767364502,-41.1102600097656,-41.1098098754883,-41.1091499328613,-41.1090774536133,-41.1090278625488,-41.1089973449707,-41.1089706420898,-41.1089286804199,-41.1088371276855,-41.1088485717773,-41.1088600158691,-41.1088676452637,-41.1088905334473,-41.1089401245117,-41.1089897155762,-41.1090507507324,-41.1092491149902,-41.1093788146973,-41.109489440918,-41.1096496582031,-41.110179901123,-41.1104507446289,-41.1106300354004,-41.1107978820801,-41.1109199523926,-41.1110801696777,-41.1112098693848,-41.1113471984863,-41.1114196777344,-41.1115303039551,-41.1116485595703,-41.1117095947266,-41.1117897033691,-41.1118392944336,-41.1119079589844,-41.1120185852051,-41.1121101379395,-41.1121978759766,-41.1122703552246,-41.1123504638672,-41.1124000549316,-41.1124496459961,-41.1124877929688,-41.1125297546387,-41.1127281188965,-41.1128196716309,-41.112907409668,-41.1129379272461,-41.113109588623,-41.1132392883301,-41.1133499145508,-41.1134300231934,-41.1134796142578,-41.1135177612305,-41.1135673522949,-41.1135787963867,-41.1135902404785,-41.1136474609375,-41.1137008666992,-41.11376953125,-41.1138305664062,-41.1138801574707,-41.1139373779297,-41.1139488220215,-41.1140594482422,-41.1142082214355,-41.1143379211426,-41.1144905090332,-41.1146278381348,-41.1147804260254,-41.1148796081543,-41.1149673461914,-41.1150703430176,-41.1151504516602,-41.1152191162109,-41.1152687072754,-41.1152801513672,-41.1152992248535,-41.1153297424316,-41.1154479980469,-41.1155204772949,-41.1155204772949,-41.1156005859375,-41.1156692504883,-41.1157493591309,-41.1157989501953,-41.115837097168,-41.1158905029297,-41.115909576416,-41.1159286499023,-41.1159400939941,-41.1159400939941,-41.1159400939941,-41.1159172058105,-41.1158676147461,-41.1158599853516,-41.1158599853516,-41.1158599853516,-41.1158676147461,-41.1158905029297,-41.115909576416,-41.1159591674805,-41.1161193847656,-41.1161994934082,-41.1161994934082,-41.1162071228027,-41.1162300109863,-41.1162376403809,-41.1162376403809,-41.1162300109863,-41.1162071228027,-41.1161689758301,-41.1161308288574,-41.1161308288574,-41.1161003112793,-41.1161003112793,-41.1161003112793,-41.1161079406738,-41.1161308288574,-41.1161575317383,-41.1161880493164,-41.1162300109863,-41.116268157959,-41.1163291931152,-41.1164207458496,-41.1165008544922,-41.1165771484375,-41.1166801452637,-41.1167907714844,-41.1170272827148,-41.1171875,-41.1173896789551,-41.1174774169922,-41.1175689697266,-41.1177101135254,-41.1178588867188,-41.1179504394531,-41.1182479858398,-41.118408203125,-41.1187973022461,-41.1188583374023,-41.1190795898438,-41.119270324707,-41.1194381713867,-41.1196708679199,-41.1202583312988,-41.1208877563477,-41.1215286254883,-41.1219177246094,-41.1221694946289,-41.1223602294922,-41.1224708557129,-41.12255859375,-41.1226272583008,-41.1226997375488,-41.1227378845215,-41.1227874755859,-41.1228294372559,-41.1228370666504,-41.1228485107422,-41.1228485107422,-41.1228370666504,-41.1228179931641,-41.1227874755859,-41.1227684020996,-41.1227073669434,-41.1226997375488,-41.122688293457,-41.1226806640625,-41.1226806640625,-41.122688293457,-41.1226997375488,-41.1227188110352,-41.1227493286133,-41.1227798461914,-41.1228179931641,-41.1228675842285,-41.1229286193848,-41.1230087280273,-41.1231002807617,-41.123218536377,-41.1234703063965,-41.1235694885254,-41.1238174438477,-41.1239585876465,-41.1240386962891,-41.1243286132812,-41.124927520752,-41.1253700256348,-41.1257286071777,-41.1259078979492,-41.1260681152344,-41.126277923584,-41.1266593933105,-41.1267776489258,-41.1269683837891,-41.1273193359375,-41.1276397705078,-41.1281089782715,-41.1290473937988,-41.1298408508301,-41.1305198669434,-41.1311378479004,-41.1316604614258,-41.1318702697754,-41.1321907043457,-41.1323585510254,-41.1325492858887,-41.1327590942383,-41.1329689025879,-41.1332397460938,-41.1335487365723,-41.1336975097656,-41.1339073181152,-41.1341171264648,-41.1342697143555,-41.134578704834,-41.134880065918,-41.1351280212402,-41.1353492736816,-41.1356506347656,-41.1359100341797,-41.1362686157227,-41.1364707946777,-41.1366806030273,-41.1370277404785,-41.1373291015625,-41.1375770568848,-41.1380577087402,-41.1383171081543,-41.1385688781738,-41.1387672424316,-41.1391372680664,-41.1394195556641,-41.139778137207,-41.1399993896484,-41.1401786804199,-41.140438079834,-41.1407470703125,-41.1410179138184,-41.141357421875,-41.1416778564453,-41.1422004699707,-41.1428489685059,-41.1433792114258,-41.1436500549316,-41.1438789367676,-41.1440773010254,-41.1442680358887,-41.1444206237793,-41.1445274353027,-41.144718170166,-41.1449203491211,-41.1449699401855,-41.1451873779297,-41.1453704833984,-41.1455993652344,-41.1457290649414,-41.1458282470703,-41.1459579467773,-41.1460800170898,-41.1461906433105,-41.1463088989258,-41.1464195251465,-41.146900177002,-41.1474189758301,-41.147590637207,-41.1477584838867,-41.1479797363281,-41.1482200622559,-41.1484870910645,-41.1486473083496,-41.1489906311035,-41.1495780944824,-41.1496391296387,-41.1497077941895,-41.1497802734375,-41.1498374938965,-41.1499099731445,-41.1499786376953,-41.1500473022461,-41.1501197814941,-41.1501884460449,-41.1502685546875,-41.1503372192383,-41.1504096984863,-41.1504783630371,-41.1505584716797,-41.1506271362305,-41.150707244873,-41.1507873535156,-41.1508598327637,-41.1509399414062,-41.1517105102539,-41.1517906188965,-41.1518592834473,-41.1519393920898,-41.1520195007324,-41.1520881652832,-41.1521682739258,-41.1522407531738,-41.1523094177246,-41.1523895263672,-41.152458190918,-41.152530670166,-41.1525993347168,-41.1526679992676,-41.1527404785156,-41.1528091430664,-41.1528778076172,-41.1529502868652,-41.153018951416,-41.1530799865723,-41.153148651123,-41.1532173156738,-41.1532783508301,-41.1533393859863,-41.1534080505371,-41.1534690856934,-41.1535301208496,-41.1535987854004,-41.1536598205566,-41.1537208557129,-41.1537780761719,-41.1538276672363,-41.1538887023926,-41.1563606262207,-41.1570777893066,-41.1571388244629,-41.1571998596191,-41.1572494506836,-41.1573104858398,-41.1573677062988,-41.1574287414551,-41.1574783325195,-41.1575393676758,-41.1575889587402,-41.1576385498047,-41.1576881408691,-41.1577491760254,-41.1577987670898,-41.1578483581543,-41.1578979492188,-41.1579475402832,-41.1579895019531,-41.1580390930176,-41.158088684082,-41.158130645752,-41.1581802368164,-41.1587371826172,-41.1587905883789,-41.1588287353516,-41.158878326416,-41.1589202880859,-41.1589698791504,-41.1590194702148,-41.1590576171875,-41.159107208252,-41.1591606140137,-41.1592102050781,-41.1592597961426,-41.159309387207,-41.1593589782715,-41.1594200134277,-41.1594696044922,-41.1595191955566,-41.1595802307129,-41.1596298217773,-41.1596908569336,-41.159740447998,-41.159797668457,-41.1598587036133,-41.1599197387695,-41.159969329834,-41.1600303649902,-41.1600875854492,-41.1601486206055,-41.1602096557617,-41.160270690918,-41.1603393554688,-41.160400390625,-41.160457611084,-41.1605186462402,-41.160587310791,-41.1606483459473,-41.1607208251953,-41.1607780456543,-41.1608505249023,-41.1609191894531,-41.1609802246094,-41.1610488891602,-41.1611175537109,-41.161190032959,-41.1612586975098,-41.1613273620605,-41.1613998413086,-41.1614685058594,-41.1615371704102,-41.1616096496582,-41.161678314209,-41.161750793457,-41.1618270874023,-41.1618995666504,-41.161979675293,-41.1620483398438,-41.1621208190918,-41.1621971130371,-41.1622772216797,-41.1632194519043,-41.1632881164551,-41.1633682250977,-41.1634407043457,-41.1635093688965,-41.1635780334473,-41.1636505126953,-41.1637191772461,-41.1637802124023,-41.1638488769531,-41.1639175415039,-41.163990020752,-41.1640472412109,-41.164119720459,-41.1641883850098,-41.164249420166,-41.1643180847168,-41.164379119873,-41.1644401550293,-41.1645088195801,-41.1645698547363,-41.1646270751953,-41.1646881103516,-41.1647491455078,-41.1657104492188,-41.1657791137695,-41.1658401489258,-41.1658973693848,-41.165958404541,-41.1660194396973,-41.1660804748535,-41.1661491394043,-41.1662101745605,-41.1662673950195,-41.1663284301758,-41.1663970947266,-41.1664581298828,-41.1665191650391,-41.1665878295898,-41.1666488647461,-41.1682205200195,-41.1687507629395,-41.169319152832,-41.1699295043945,-41.1703872680664,-41.1707801818848,-41.171329498291,-41.1716079711914,-41.1719398498535,-41.1723175048828,-41.1727600097656,-41.1735076904297,-41.1742401123047,-41.1745986938477,-41.1749382019043,-41.1753387451172,-41.1757774353027,-41.1759872436523,-41.1762199401855,-41.1763877868652,-41.1765670776367,-41.1767501831055,-41.176887512207,-41.1771507263184,-41.177417755127,-41.1779899597168,-41.1786193847656,-41.1797103881836,-41.180347442627,-41.1807899475098,-41.1811485290527,-41.1815605163574,-41.1820602416992,-41.1827774047852,-41.1835289001465,-41.1839370727539,-41.1841087341309,-41.1842803955078,-41.184440612793,-41.1848602294922,-41.1853370666504,-41.1862106323242,-41.1871299743652,-41.1875381469727,-41.1878700256348,-41.1884078979492,-41.1889495849609,-41.1892471313477,-41.1896286010742,-41.1898880004883,-41.1899299621582,-41.1899795532227,-41.1901588439941,-41.1904678344727,-41.1905174255371,-41.1907386779785,-41.1910285949707,-41.1911697387695,-41.1913070678711,-41.1917304992676,-41.1920204162598,-41.1925888061523,-41.193187713623,-41.1937980651855,-41.194278717041,-41.194450378418,-41.1949195861816,-41.1949272155762,-41.1950187683105,-41.1954002380371,-41.1961479187012,-41.1967582702637,-41.1969795227051,-41.1971702575684,-41.1973991394043,-41.1978073120117,-41.1981506347656,-41.1983985900879,-41.1985778808594,-41.1988372802734,-41.1990776062012,-41.1991996765137,-41.199390411377,-41.1997184753418,-41.2001686096191,-41.200927734375,-41.2017784118652,-41.2018890380859,-41.2019691467285,-41.2020874023438,-41.2024879455566,-41.2025299072266,-41.2025680541992,-41.2025985717773,-41.2027282714844,-41.202880859375,-41.2029685974121,-41.2030487060547,-41.2030906677246,-41.2031288146973,-41.2031898498535,-41.2032775878906,-41.2035903930664,-41.203987121582,-41.2048683166504,-41.2052803039551,-41.2054481506348,-41.2056083679199,-41.2062072753906,-41.2064476013184,-41.2067184448242,-41.2071876525879,-41.2075271606445,-41.2078285217285,-41.2080993652344,-41.2084503173828,-41.2086486816406,-41.2093505859375,-41.2099571228027,-41.2102394104004,-41.21044921875,-41.2107200622559,-41.211067199707,-41.2113380432129,-41.2116508483887,-41.2120475769043,-41.2126884460449,-41.2129783630371,-41.2136383056641,-41.2140808105469,-41.2143173217773,-41.2146606445312,-41.2149200439453,-41.2150192260742,-41.2151794433594,-41.2154006958008,-41.2156105041504,-41.2158203125,-41.215950012207,-41.2160682678223,-41.2162094116211,-41.2163505554199,-41.2165603637695,-41.2167091369629,-41.2168579101562,-41.2171897888184,-41.2174377441406,-41.2175102233887,-41.2177276611328,-41.2178688049316,-41.2181587219238,-41.2185401916504,-41.2190704345703,-41.2193489074707,-41.2196273803711,-41.2203102111816,-41.2205772399902,-41.220760345459,-41.2209701538086,-41.2213401794434,-41.2215576171875,-41.2217597961426,-41.2219276428223,-41.2222290039062,-41.2225074768066,-41.2229499816895,-41.2234306335449,-41.2236289978027,-41.2237281799316,-41.2238006591797,-41.2238578796387,-41.2239074707031,-41.223949432373,-41.2239685058594,-41.2239875793457,-41.2239990234375,-41.2239875793457,-41.2239875793457,-41.2239799499512,-41.2239799499512,-41.2239685058594,-41.223949432373,-41.2239303588867,-41.2239074707031,-41.2238578796387,-41.2238273620605,-41.2238082885742,-41.2238006591797,-41.2238006591797,-41.2238082885742,-41.2238273620605,-41.2238693237305,-41.2239379882812,-41.2240371704102,-41.2241973876953,-41.2249298095703,-41.225399017334,-41.2258796691895,-41.2260398864746,-41.2262191772461,-41.2266502380371,-41.2268104553223,-41.2269477844238,-41.2270584106445,-41.2271690368652,-41.2273902893066,-41.2280006408691,-41.2284202575684,-41.2285575866699,-41.228687286377,-41.2288475036621,-41.2290802001953,-41.2293281555176,-41.2296104431152,-41.2299194335938,-41.230640411377,-41.2308502197266,-41.2310104370117,-41.231258392334,-41.2314376831055,-41.2316284179688,-41.2319488525391,-41.2320976257324,-41.232250213623,-41.2324371337891,-41.2326583862305,-41.2328186035156,-41.2329902648926,-41.2342796325684,-41.2349891662598,-41.2356986999512,-41.2371101379395,-41.2388687133789,-41.239990234375,-41.2409591674805,-41.2421188354492,-41.2426986694336,-41.2432479858398,-41.243579864502,-41.2439880371094,-41.2442779541016,-41.2446594238281,-41.2450370788574,-41.2455902099609,-41.2461090087891,-41.2464294433594,-41.2466888427734,-41.246940612793,-41.2471580505371,-41.2474479675293,-41.247688293457,-41.2479782104492,-41.2482681274414,-41.2486000061035,-41.2491188049316,-41.2495193481445,-41.2506675720215,-41.2509880065918,-41.2512092590332,-41.2514495849609,-41.2516708374023,-41.2518501281738,-41.252067565918,-41.2523498535156,-41.2526779174805,-41.2529487609863,-41.2531585693359,-41.2535095214844,-41.2537879943848,-41.2539596557617,-41.2541275024414,-41.2545204162598,-41.2547378540039,-41.2549591064453,-41.2551307678223,-41.2553176879883,-41.2555084228516,-41.2557106018066,-41.2559700012207,-41.2563095092773,-41.2568283081055,-41.257007598877,-41.2572402954102,-41.2574996948242,-41.2578773498535,-41.2584571838379,-41.2588806152344,-41.2591781616211,-41.2594871520996,-41.2598495483398,-41.2601470947266,-41.2605895996094,-41.2608680725098,-41.2610778808594,-41.2612800598145,-41.2614402770996,-41.2616500854492,-41.2618179321289,-41.2620887756348,-41.2623291015625,-41.2624893188477,-41.2626800537109,-41.2627601623535,-41.2628784179688,-41.2630805969238,-41.263298034668,-41.264030456543,-41.2649192810059,-41.2651977539062,-41.2668495178223,-41.267147064209,-41.2676086425781,-41.2680892944336,-41.2697982788086,-41.2700271606445,-41.2702789306641,-41.2704200744629,-41.2716674804688,-41.2718772888184,-41.2719879150391,-41.2721290588379,-41.2722473144531,-41.2723693847656,-41.2725105285645,-41.2727584838867,-41.2730484008789,-41.2731170654297,-41.2734870910645,-41.2737197875977,-41.2741508483887,-41.2742881774902,-41.2745475769043,-41.2745704650879,-41.274787902832,-41.2749176025391,-41.2750396728516,-41.2751274108887,-41.2755279541016,-41.2755508422852,-41.2755699157715,-41.2755699157715,-41.2755584716797,-41.2755508422852,-41.2755889892578,-41.2756195068359,-41.2756385803223,-41.2756385803223]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"#000000","weight":3,"opacity":1,"fill":false,"fillColor":"#000000","fillOpacity":0.2,"smoothFactor":1,"noClip":false},"28m 54.7s , 35.3kms",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMarkers","args":[-41.10678,175.10847,null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},"25 Edelweiss Grv, Timberlea, Upper Hutt 5018, New Zealand",null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMarkers","args":[-41.27568,174.78112,null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},"1 Pipitea St, Thorndon, Wellington 6011, New Zealand",null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-41.27568,-41.1054992675781],"lng":[174.778350830078,175.10847]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>