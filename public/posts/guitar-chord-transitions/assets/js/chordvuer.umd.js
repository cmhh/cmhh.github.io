(function(g,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],o):(g=typeof globalThis<"u"?globalThis:g||self,o(g.chordvuer={},g.Vue))})(this,function(g,o){"use strict";const E="",m=(e,t)=>{const r=e.__vccOpts||e;for(const[i,n]of t)r[i]=n;return r},u={name:"GuitarChord",props:{id:{type:String,required:!0},duration:{type:Number,default:1e3},fps:{type:Number,default:10},chord:{type:Object,default:{}}},computed:{frames(){const e=this.duration/1e3;return Math.ceil(this.fps*e)},frameLength(){return 1e3/this.fps}},watch:{chord(e,t){this.applyAll(e,t)}},mounted(){this.applyAll(this.chord,null)},methods:{async clear(){const e=document.getElementById(this.id);Array.prototype.slice.call(e.getElementsByClassName("finger")).forEach(t=>e.removeChild(t)),Array.prototype.slice.call(e.getElementsByClassName("chord-name")).forEach(t=>this.swaptxt(t,"")),Array.prototype.slice.call(e.getElementsByClassName("strike")).forEach(t=>this.swaptxt(t,"")),Array.prototype.slice.call(e.getElementsByClassName("note-high-e")).forEach(t=>this.swaptxt(t,"E")),Array.prototype.slice.call(e.getElementsByClassName("note-b")).forEach(t=>this.swaptxt(t,"B")),Array.prototype.slice.call(e.getElementsByClassName("note-g")).forEach(t=>this.swaptxt(t,"G")),Array.prototype.slice.call(e.getElementsByClassName("note-d")).forEach(t=>this.swaptxt(t,"D")),Array.prototype.slice.call(e.getElementsByClassName("note-a")).forEach(t=>this.swaptxt(t,"A")),Array.prototype.slice.call(e.getElementsByClassName("note-low-e")).forEach(t=>this.swaptxt(t,"E"))},async applyAll(e,t){if(!e||Object.keys(e).length===0){this.clear();return}this.applyTitle(e,t),this.applyFingers(e),this.applyStrike(e),this.applyNotes(e),this.applyFrets(e)},async applyTitle(e,t){var i=document.getElementById(this.id).getElementsByClassName("chord-name")[0];t?this.swaptxt(i,e.name):(i.setAttributeNS(null,"opacity",0),i.textContent=e.name,this.fadein(i))},async applyFrets(e){const t=document.getElementById(this.id),r=Array.prototype.slice.call(t.getElementsByClassName("fret-number")),i=this.fretOffset(e),n=[1,2,3,4,5].map(a=>i==0?"":`${a+i}`);r.forEach((a,s)=>{a.textContent!=n[s]&&this.swaptxt(a,n[s])})},async applyFingers(e){[1,2,3,4].forEach(t=>this.applyFinger(t,e))},async applyFinger(e,t){const r=document.getElementById(this.id),i=this.fretOffset(t),n=r.querySelectorAll(`circle.finger-${e}`),a=r.querySelectorAll(`text.finger-${e}`),s=t.fingers.filter(f=>f.finger==e)[0];if(n.length>0&&!s)n.forEach(f=>this.fadeout(f)),a.forEach(f=>this.fadeout(f));else if(n.length==0&&s)s.strings.map(f=>{const[c,h]=this.makeFinger(e,f,s.fret-i);r.appendChild(c),r.appendChild(h),this.fadein(c),this.fadein(h)});else if(n.length>0&&s){if(n.length>1)for(var d=1;d<n.length;d++)this.fadeout(n[d]),this.fadeout(a[d]);s.strings.length>1&&s.strings.slice(1).map(f=>{const[c,h]=this.makeFinger(e,f,s.fret-i);r.appendChild(c),r.appendChild(h),this.fadein(c),this.fadein(h)}),this.move(n[0],s.strings[0],s.fret-i),this.move(a[0],s.strings[0],s.fret-i)}},makeFinger(e,t,r){const i="http://www.w3.org/2000/svg",n=this.XY(t,r),a=document.createElementNS(i,"circle");a.setAttributeNS(null,"class",`finger finger-${e}`),a.setAttributeNS(null,"cx",n[0]),a.setAttributeNS(null,"cy",n[1]),a.setAttributeNS(null,"r","0.3"),a.setAttributeNS(null,"opacity",0);const s=document.createElementNS(i,"text");return s.setAttributeNS(null,"class",`finger finger-${e}`),s.setAttributeNS(null,"x",n[0]),s.setAttributeNS(null,"y",n[1]),s.setAttributeNS(null,"text-anchor","middle"),s.setAttributeNS(null,"alignment-baseline","middle"),s.setAttributeNS(null,"opacity",0),s.textContent=e,[a,s]},async applyStrike(e){if(!this.chord)return null;const t=document.getElementById(this.id),r=Array.prototype.slice.call(t.getElementsByClassName("strike")),i=[1,2,3,4,5,6].map(n=>e.open.includes(n)?"\u25EF":e.closed.includes(n)?"\uFF38":"");r.forEach((n,a)=>{n.textContent!=i[a]&&this.swaptxt(n,i[a])})},async applyNotes(e){const t=document.getElementById(this.id),r=Array.prototype.slice.call(t.getElementsByClassName("note")),i=[1,2,3,4,5,6].map(n=>{if(e.closed.includes(n))return"";const a=e.fingers.filter(s=>s.strings.includes(n)).map(s=>s.fret);return a.length==0?this.note(n,0):this.note(n,Math.max(...a))});r.forEach((n,a)=>{n.textContent!=i[a]&&this.swaptxt(n,i[a])})},sleep(e){return new Promise(t=>setTimeout(t,e))},XY(e,t){const r=6-e+1,i=1+1.5/2+(t-1)*1.5;return[r,i]},note(e,t){function r(s){if(s=="A")return"A#";if(s=="A#")return"B";if(s=="B")return"C";if(s=="C")return"C#";if(s=="C#")return"D";if(s=="D")return"D#";if(s=="D#")return"E";if(s=="E")return"F";if(s=="F")return"F#";if(s=="F#")return"G";if(s=="G")return"G#";if(s=="G#")return"A"}function i(s){if(s==6)return"E";if(s==5)return"A";if(s==4)return"D";if(s==3)return"G";if(s==2)return"B";if(s==1)return"E"}for(var n=i(e),a=0;a<t;a++)n=r(n);return n},seq(e,t,r){const i=(t-e)/r,n=Array(r-1).fill().map((a,s)=>e+i*(s+1));return n.push(t),n},path(e,t,r){const i=this.seq(e[0],t[0],r),n=this.seq(e[1],t[1],r);return i.map((a,s)=>[a,n[s]])},fretOffset(e){const t=e.fingers.map(r=>r.fret);return Math.max(...t)<=5?0:Math.min(...t)-2},async fadeout(e){for(var t=0;t<this.frames;t++)await this.sleep(this.frameLength),e.setAttributeNS(null,"opacity",1-(t+1)*(1/this.frames));document.getElementById(this.id).removeChild(e)},async fadein(e){for(var t=0;t<this.frames;t++)await this.sleep(this.frameLength),e.setAttributeNS(null,"opacity",(t+1)*(1/this.frames))},async swaptxt(e,t){const r=Math.floor(this.frames/2),i=this.frames-r;for(var n=0;n<r;n++)await this.sleep(this.frameLength),e.setAttributeNS(null,"opacity",1-(n+1)*(1/r));e.textContent=t;for(var n=0;n<i;n++)await this.sleep(this.frameLength),e.setAttributeNS(null,"opacity",(n+1)*(1/i))},async move(e,t,r){const i=e.tagName=="circle"?"cx":"x",n=e.tagName=="circle"?"cy":"y",a=[parseFloat(e.getAttributeNS(null,i)),parseFloat(e.getAttributeNS(null,n))],s=this.XY(t,r),d=this.path(a,s,this.frames);for(var f=0;f<d.length;f++)await this.sleep(this.frameLength),e.setAttributeNS(null,i,d[f][0]),e.setAttributeNS(null,n,d[f][1])}}},y=["id"],x=[o.createStaticVNode('<rect class="fretboard" x="1" y="1" width="5" height="7.5" data-v-7d34b470></rect><line class="nut" x1="1" y1="1" x2="6" y2="1" data-v-7d34b470></line><line class="fret" x1="1" y1="2.5" x2="6" y2="2.5" data-v-7d34b470></line><line class="fret" x1="1" y1="4" x2="6" y2="4" data-v-7d34b470></line><line class="fret" x1="1" y1="5.5" x2="6" y2="5.5" data-v-7d34b470></line><line class="fret" x1="1" y1="7" x2="6" y2="7" data-v-7d34b470></line><line class="fret" x1="1" y1="8.5" x2="6" y2="8.5" data-v-7d34b470></line><text class="fret-number" x="0.55" y="1.75" text-anchor="middle" alignment-baseline="middle" data-v-7d34b470>1</text><text class="fret-number" x="0.55" y="3.25" text-anchor="middle" alignment-baseline="middle" data-v-7d34b470>2</text><text class="fret-number" x="0.55" y="4.75" text-anchor="middle" alignment-baseline="middle" data-v-7d34b470>3</text><text class="fret-number" x="0.55" y="6.25" text-anchor="middle" alignment-baseline="middle" data-v-7d34b470>4</text><text class="fret-number" x="0.55" y="7.75" text-anchor="middle" alignment-baseline="middle" data-v-7d34b470>5</text><line class="string string-high-e" x1="6" y1="1" x2="6" y2="8.5" data-v-7d34b470></line><line class="string string-b" x1="5" y1="1" x2="5" y2="8.5" data-v-7d34b470></line><line class="string string-g" x1="4" y1="1" x2="4" y2="8.5" data-v-7d34b470></line><line class="string string-d" x1="3" y1="1" x2="3" y2="8.5" data-v-7d34b470></line><line class="string string-a" x1="2" y1="1" x2="2" y2="8.5" data-v-7d34b470></line><line class="string string-low-e" x1="1" y1="1" x2="1" y2="8.5" data-v-7d34b470></line><text class="chord-name" x="3.5" y="0" text-anchor="middle" alignment-baseline="hanging" data-v-7d34b470></text><text class="strike strike-high-e" x="6" y="1" dy="-0.2" text-anchor="middle" alignment-baseline="top" data-v-7d34b470></text><text class="strike strike-b" x="5" y="1" dy="-0.2" text-anchor="middle" alignment-baseline="top" data-v-7d34b470></text><text class="strike strike-g" x="4" y="1" dy="-0.2" text-anchor="middle" alignment-baseline="top" data-v-7d34b470></text><text class="strike strike-d" x="3" y="1" dy="-0.2" text-anchor="middle" alignment-baseline="top" data-v-7d34b470></text><text class="strike strike-a" x="2" y="1" dy="-0.2" text-anchor="middle" alignment-baseline="top" data-v-7d34b470></text><text class="strike strike-low-e" x="1" y="1" dy="-0.2" text-anchor="middle" alignment-baseline="top" data-v-7d34b470></text><text class="note note-high-e" x="6" y="8.5" dy="0.2" text-anchor="middle" alignment-baseline="hanging" data-v-7d34b470>E</text><text class="note note-b" x="5" y="8.5" dy="0.2" text-anchor="middle" alignment-baseline="hanging" data-v-7d34b470>B</text><text class="note note-g" x="4" y="8.5" dy="0.2" text-anchor="middle" alignment-baseline="hanging" data-v-7d34b470>G</text><text class="note note-d" x="3" y="8.5" dy="0.2" text-anchor="middle" alignment-baseline="hanging" data-v-7d34b470>D</text><text class="note note-a" x="2" y="8.5" dy="0.2" text-anchor="middle" alignment-baseline="hanging" data-v-7d34b470>A</text><text class="note note-low-e" x="1" y="8.5" dy="0.2" text-anchor="middle" alignment-baseline="hanging" data-v-7d34b470>E</text>',31)];function b(e,t,r,i,n,a){return o.openBlock(),o.createElementBlock("svg",{id:r.id,class:"chord",viewBox:"0 0 7 9.5"},x,8,y)}const p=m(u,[["render",b],["__scopeId","data-v-7d34b470"]]),A={name:"GuitarChordTransitions",components:{GuitarChord:p},data(){return{chord:null}},props:{id:{type:String,required:!0},duration:{type:Number,default:1e3},fps:{type:Number,default:10},chords:{type:Array,default:[]}},mounted(){this.loop()},methods:{async loop(){for(var e=1;;)await this.sleep(this.duration),this.chord=this.chords[e],e+=1,e>=this.chords.length&&(e=0)},sleep(e){return new Promise(t=>setTimeout(t,e))}}};function _(e,t,r,i,n,a){const s=o.resolveComponent("GuitarChord");return o.openBlock(),o.createBlock(s,{id:`${r.id}-chord`,duration:r.duration/2,fps:r.fps,chord:n.chord},null,8,["id","duration","fps","chord"])}const v=m(A,[["render",_]]),l={"A\u266D5":{name:"G\u266F5 / A\u266D5",fingers:[{finger:1,fret:4,strings:[6]},{finger:3,fret:6,strings:[5]},{finger:4,fret:6,strings:[4]}],open:[],closed:[3,2,1]},A:{name:"A",fingers:[{finger:1,fret:2,strings:[4]},{finger:2,fret:2,strings:[3]},{finger:3,fret:2,strings:[2]}],open:[5,1],closed:[6]},A5_1:{name:"A5",fingers:[{finger:1,fret:2,strings:[4]},{finger:2,fret:2,strings:[3]}],open:[5],closed:[6,2,1]},A5_2:{name:"A5",fingers:[{finger:1,fret:5,strings:[6]},{finger:3,fret:7,strings:[5]},{finger:4,fret:7,strings:[4]}],open:[],closed:[3,2,1]},A7:{name:"A Dominant 7",fingers:[{finger:2,fret:2,strings:[4]},{finger:3,fret:2,strings:[2]}],open:[5,3,1],closed:[6]},Am:{name:"A Minor",fingers:[{finger:2,fret:2,strings:[4]},{finger:3,fret:2,strings:[3]},{finger:1,fret:1,strings:[2]}],open:[5,1],closed:[6]},B_1:{name:"B",fingers:[{finger:1,fret:2,strings:[1,2,3,4,5]},{finger:2,fret:4,strings:[4]},{finger:3,fret:4,strings:[3]},{finger:4,fret:4,strings:[2]}],open:[],closed:[6]},B_2:{name:"B",fingers:[{finger:1,fret:2,strings:[1]},{finger:3,fret:4,strings:[3]},{finger:4,fret:4,strings:[2]}],open:[],closed:[6,5,4]},B5_1:{name:"B5",fingers:[{finger:1,fret:2,strings:[5]},{finger:3,fret:4,strings:[4]},{finger:4,fret:4,strings:[3]}],open:[],closed:[6,2,1]},B5_2:{name:"B5",fingers:[{finger:1,fret:7,strings:[6]},{finger:3,fret:9,strings:[5]},{finger:4,fret:9,strings:[4]}],open:[],closed:[3,2,1]},B7:{name:"B Dominant 7",fingers:[{finger:1,fret:1,strings:[4]},{finger:2,fret:2,strings:[5]},{finger:3,fret:2,strings:[3]},{finger:4,fret:2,strings:[1]}],open:[2],closed:[6]},C:{name:"C",fingers:[{finger:1,fret:1,strings:[2]},{finger:2,fret:2,strings:[4]},{finger:3,fret:3,strings:[5]}],open:[3,1],closed:[6]},C5:{name:"C5",fingers:[{finger:1,fret:3,strings:[5]},{finger:3,fret:5,strings:[4]},{finger:4,fret:5,strings:[3]}],open:[],closed:[6,2,1]},C7:{name:"C Dominant 7",fingers:[{finger:1,fret:1,strings:[2]},{finger:2,fret:2,strings:[4]},{finger:3,fret:3,strings:[5]},{finger:4,fret:3,strings:[3]}],open:[1],closed:[6]},D:{name:"D",fingers:[{finger:1,fret:2,strings:[3]},{finger:2,fret:2,strings:[1]},{finger:3,fret:3,strings:[2]}],open:[4],closed:[6,5]},D5_1:{name:"D5",fingers:[{finger:1,fret:2,strings:[3]}],open:[4],closed:[6,5,2,1]},D5_2:{name:"D5",fingers:[{finger:1,fret:5,strings:[5]},{finger:3,fret:7,strings:[4]},{finger:4,fret:7,strings:[3]}],open:[],closed:[6,2,1]},D7:{name:"D Dominant 7",fingers:[{finger:1,fret:1,strings:[2]},{finger:2,fret:2,strings:[3]},{finger:3,fret:2,strings:[1]}],open:[4],closed:[6,5]},Dm:{name:"D Minor",fingers:[{finger:1,fret:1,strings:[1]},{finger:2,fret:2,strings:[3]},{finger:3,fret:3,strings:[2]}],open:[4],closed:[6,5]},E:{name:"E",fingers:[{finger:1,fret:1,strings:[3]},{finger:2,fret:2,strings:[5]},{finger:3,fret:2,strings:[4]}],open:[6,2,1],closed:[]},E5_1:{name:"E5",fingers:[{finger:1,fret:2,strings:[5]},{finger:2,fret:2,strings:[4]}],open:[6],closed:[3,2,1]},E5_2:{name:"E5",fingers:[{finger:1,fret:7,strings:[5]},{finger:3,fret:9,strings:[4]},{finger:4,fret:9,strings:[3]}],open:[],closed:[6,2,1]},E7:{name:"E Dominant 7",fingers:[{finger:1,fret:1,strings:[3]},{finger:2,fret:2,strings:[5]}],open:[6,4,2,1],closed:[]},Em:{name:"E Minor",fingers:[{finger:2,fret:2,strings:[5]},{finger:3,fret:2,strings:[4]}],open:[6,3,2,1],closed:[]},F:{name:"F",fingers:[{finger:1,fret:1,strings:[2,1]},{finger:2,fret:2,strings:[3]},{finger:3,fret:3,strings:[4]}],open:[],closed:[6,5]},F5:{name:"F5",fingers:[{finger:1,fret:1,strings:[6]},{finger:3,fret:3,strings:[5]},{finger:4,fret:3,strings:[4]}],open:[],closed:[3,2,1]},"F\u266F5":{name:"F\u266F5 / G\u266D5",fingers:[{finger:1,fret:2,strings:[6]},{finger:3,fret:4,strings:[5]},{finger:4,fret:4,strings:[4]}],open:[],closed:[3,2,1]},"G\u266D5":{name:"F\u266F5 / G\u266D5",fingers:[{finger:1,fret:2,strings:[6]},{finger:3,fret:4,strings:[5]},{finger:4,fret:4,strings:[4]}],open:[],closed:[3,2,1]},G:{name:"G",fingers:[{finger:1,fret:2,strings:[5]},{finger:2,fret:3,strings:[6]},{finger:3,fret:3,strings:[1]}],open:[3,4],closed:[]},"G\u266F5":{name:"G\u266F5 / A\u266D5",fingers:[{finger:1,fret:4,strings:[6]},{finger:3,fret:6,strings:[5]},{finger:4,fret:6,strings:[4]}],open:[],closed:[3,2,1]},G5:{name:"G5",fingers:[{finger:1,fret:3,strings:[6]},{finger:3,fret:5,strings:[5]},{finger:4,fret:5,strings:[4]}],open:[],closed:[3,2,1]},G7:{name:"G Dominant 7",fingers:[{finger:1,fret:1,strings:[1]},{finger:2,fret:2,strings:[5]},{finger:3,fret:3,strings:[6]}],open:[4,3,2],closed:[]}};l["A\u266D5"],l.A5_1,l.A5_2,l.B5_1,l.B5_2,l.C5,l.D5_1,l.D5_2,l.E5_1,l.E5_2,l.F,l["F\u266F5"],l["G\u266D5"],g.GuitarChord=p,g.GuitarChordTransitions=v,g.chords=l,Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
